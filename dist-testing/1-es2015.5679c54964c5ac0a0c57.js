(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{SI13:function(e,t,i){"use strict";i.r(t),i.d(t,"ResourceModule",(function(){return Ci}));var n=i("M0ag"),o=i("cWTo"),a=i("tyNb"),s=i("mrSG"),c=i("t/UT"),l=i("ofXK"),r=i("Ac7g"),d=i("YMfE"),b=i("sspt"),h=i("fXoL"),m=i("3Pt+"),u=i("PScX"),f=i("o0su"),g=i("atJ9"),p=(i("ey9i"),i("dEAy")),z=i("ocnv"),v=i("B+r4"),y=i("PTRe"),A=i("EGpF"),S=i("ZyQt"),T=i("OzZK"),C=i("RwU8"),w=i("C2AL"),I=i("FwiY"),D=i("sYmb");function N(e,t){if(1&e&&h.Nc(0),2&e){const e=h.fc();h.Pc(" ",e.tittle," ")}}function k(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.country.modal-item.code.message.maxlength")))}function U(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.country.modal-item.code.message.minlength")))}function E(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.country.modal-item.code.message.required")))}function R(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.country.modal-item.code.message.pattern")))}function L(e,t){if(1&e&&(h.Lc(0,k,3,3,"ng-container",21),h.Lc(1,U,3,3,"ng-container",21),h.Lc(2,E,3,3,"ng-container",21),h.Lc(3,R,3,3,"ng-container",21)),2&e){const e=t.$implicit;h.nc("ngIf",e.hasError("maxlength")),h.Ab(1),h.nc("ngIf",e.hasError("minlength")),h.Ab(1),h.nc("ngIf",e.hasError("required")),h.Ab(1),h.nc("ngIf",e.hasError("pattern"))}}function O(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.country.modal-item.name.message.maxlength")))}function x(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.country.modal-item.name.message.minlength")))}function P(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.country.modal-item.name.message.required")))}function M(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.country.modal-item.name.message.pattern")))}function V(e,t){if(1&e&&(h.Lc(0,O,3,3,"ng-container",21),h.Lc(1,x,3,3,"ng-container",21),h.Lc(2,P,3,3,"ng-container",21),h.Lc(3,M,3,3,"ng-container",21)),2&e){const e=t.$implicit;h.nc("ngIf",e.hasError("maxlength")),h.Ab(1),h.nc("ngIf",e.hasError("minlength")),h.Ab(1),h.nc("ngIf",e.hasError("required")),h.Ab(1),h.nc("ngIf",e.hasError("pattern"))}}function F(e,t){if(1&e){const e=h.Vb();h.Ub(0,"form",4),h.bc("ngSubmit",(function(){return h.Ac(e),h.fc().save()})),h.Ub(1,"nz-form-item"),h.Ub(2,"nz-form-label",5),h.Nc(3),h.gc(4,"translate"),h.Tb(),h.Ub(5,"nz-form-control",6),h.Pb(6,"input",7),h.gc(7,"translate"),h.Lc(8,L,4,4,"ng-template",null,8,h.Mc),h.Tb(),h.Tb(),h.Ub(10,"nz-form-item"),h.Ub(11,"nz-form-label",9),h.Nc(12),h.gc(13,"translate"),h.Tb(),h.Ub(14,"nz-form-control",6),h.Pb(15,"input",10),h.gc(16,"translate"),h.Lc(17,V,4,4,"ng-template",null,11,h.Mc),h.Tb(),h.Tb(),h.Ub(19,"nz-form-item",12),h.Ub(20,"nz-form-label",13),h.Nc(21),h.gc(22,"translate"),h.Tb(),h.Ub(23,"nz-form-control",14),h.Pb(24,"nz-switch",15),h.Ub(25,"label"),h.Ub(26,"nz-tag",16),h.Nc(27),h.gc(28,"translate"),h.Tb(),h.Ub(29,"nz-tag",16),h.Nc(30),h.gc(31,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(32,"nz-form-item",17),h.Ub(33,"nz-form-label",18),h.Nc(34),h.gc(35,"translate"),h.Tb(),h.Ub(36,"nz-form-control",19),h.Pb(37,"textarea",20),h.gc(38,"translate"),h.Tb(),h.Tb(),h.Tb()}if(2&e){const e=h.xc(9),t=h.xc(18),i=h.fc();h.nc("formGroup",i.form),h.Ab(2),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(4,31,"function.country.modal-item.code.label")),h.Ab(2),h.nc("nzSm",16)("nzXs",24)("nzErrorTip",e),h.Ab(1),h.oc("placeholder",h.hc(7,33,"function.country.modal-item.code.placeholder")),h.Ab(5),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(13,35,"function.country.modal-item.name.label")),h.Ab(2),h.nc("nzSm",16)("nzXs",24)("nzErrorTip",t),h.Ab(1),h.oc("placeholder",h.hc(16,37,"function.country.modal-item.name.placeholder")),h.Ab(5),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(22,39,"function.country.modal-item.status.label")),h.Ab(2),h.nc("nzSpan",16),h.Ab(3),h.nc("nzColor","#00BB00")("hidden",!i.form.value.status),h.Ab(1),h.Oc(h.hc(28,41,"function.country.modal-item.status-true.label")),h.Ab(2),h.nc("nzColor","#EF5350")("hidden",i.form.value.status),h.Ab(1),h.Oc(h.hc(31,43,"function.country.modal-item.status-false.label")),h.Ab(3),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Pc(" ",h.hc(35,45,"function.country.modal-item.description.label")," "),h.Ab(2),h.nc("nzSm",16)("nzXs",24),h.Ab(1),h.oc("placeholder",h.hc(38,47,"function.country.modal-item.description.placeholder"))}}function X(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",25),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnEdit.click(t)})),h.Pb(1,"i",26),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnEdit.titlei18n," ")}}function G(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",27),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnSave.click(t)})),h.Pb(1,"i",28),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.nc("nzLoading",e.isLoading)("disabled",e.form.invalid),h.Ab(2),h.Pc(" ",e.btnSave.titlei18n," ")}}function q(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",29),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnCancel.click(t)})),h.Pb(1,"i",30),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc(" ",e.btnCancel.titlei18n," ")}}function B(e,t){if(1&e&&(h.Lc(0,X,3,1,"button",22),h.Lc(1,G,3,3,"button",23),h.Lc(2,q,3,1,"button",24)),2&e){const e=h.fc();h.nc("ngIf",e.isInfo&&e.btnEdit.visible&&e.btnEdit.grandAccess),h.Ab(1),h.nc("ngIf",!e.isInfo&&e.btnSave.visible&&e.btnSave.grandAccess),h.Ab(1),h.nc("ngIf",e.btnCancel.visible&&e.btnCancel.grandAccess)}}let W=(()=>{class e{constructor(e,t,i,n,o,a,s){this.fb=e,this.messageService=t,this.countryApiService=i,this.aclService=n,this.settings=o,this.i18n=a,this.doc=s,this.type="add",this.isVisible=!1,this.eventEmmit=new h.n,this.moduleName="qu\u1ed1c gia",this.isInfo=!1,this.isEdit=!1,this.isAdd=!1,this.tittle="",this.isLoading=!1,this.isReloadGrid=!1,this.regexCode=d.t,this.regexName=d.v,this.btnSave={title:"L\u01b0u",titlei18n:""+this.i18n.fanyi("layout.button.btn-save.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.save()}},this.btnSaveAndCreate={title:"L\u01b0u & Th\xeam m\u1edbi",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.save(!0)}},this.btnCancel={title:"\u0110\xf3ng",titlei18n:""+this.i18n.fanyi("layout.button.btn-cancel.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.handleCancel()}},this.btnEdit={title:"C\u1eadp nh\u1eadt",titlei18n:""+this.i18n.fanyi("layout.button.btn-edit.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.updateFormToEdit()}},this.form=this.fb.group({code:[{value:null},[m.w.required,m.w.pattern(d.t)]],name:[null,[m.w.required,m.w.pattern(d.v)]],order:[null],status:[{value:!0}],description:[null]})}handleCancel(){this.isVisible=!1,this.eventEmmit.emit(this.isReloadGrid?{type:"success"}:{type:"close"})}ngOnInit(){this.initRightOfUser()}initRightOfUser(){this.btnSave.grandAccess=this.aclService.canAbility("COUNTRY-ADD")||this.aclService.canAbility("COUNTRY-EDIT"),this.btnEdit.grandAccess=this.aclService.canAbility("COUNTRY-EDIT"),this.btnSaveAndCreate.grandAccess=this.aclService.canAbility("COUNTRY-ADD")||this.aclService.canAbility("COUNTRY-EDIT")}updateFormToEdit(){var e,t,i,n;this.updateFormType("edit"),null===(e=this.form.get("name"))||void 0===e||e.enable(),null===(t=this.form.get("order"))||void 0===t||t.enable(),null===(i=this.form.get("status"))||void 0===i||i.enable(),null===(n=this.form.get("description"))||void 0===n||n.enable()}updateFormType(e){switch(e){case"add":this.isInfo=!1,this.isEdit=!1,this.isAdd=!0,this.tittle=""+this.i18n.fanyi("function.country.modal-item.header-add");break;case"info":this.isInfo=!0,this.isEdit=!1,this.isAdd=!1,this.tittle=""+this.i18n.fanyi("function.country.modal-item.header-info");break;case"edit":this.isInfo=!1,this.isEdit=!0,this.isAdd=!1,this.tittle=""+this.i18n.fanyi("function.country.modal-item.header-edit");break;default:this.isInfo=!1,this.isEdit=!1,this.isAdd=!0,this.tittle=""+this.i18n.fanyi("function.country.modal-item.header-add")}}initData(e,t=null,i={}){var n,o,a,s,c,l,r,b,h,u,f,g;this.isLoading=!1,this.isReloadGrid=!1,this.item=e,this.type=t,this.option=i,this.updateFormType(t),this.isAdd&&(null===(n=this.form.get("code"))||void 0===n||n.enable(),null===(o=this.form.get("name"))||void 0===o||o.enable(),null===(a=this.form.get("status"))||void 0===a||a.enable(),null===(s=this.form.get("description"))||void 0===s||s.enable(),this.resetForm()),this.isEdit&&(null===(c=this.form.get("code"))||void 0===c||c.disable(),null===(l=this.form.get("name"))||void 0===l||l.enable(),null===(r=this.form.get("status"))||void 0===r||r.enable(),null===(b=this.form.get("description"))||void 0===b||b.enable(),null===(h=this.form.get("status"))||void 0===h||h.setValue(null==e?void 0:e.status)),this.isInfo&&(this.form=this.fb.group({code:[{value:null,disabled:this.isInfo},[m.w.required,m.w.pattern(d.t)]],name:[{value:null,disabled:this.isInfo},[m.w.required,m.w.pattern(d.v)]],order:[{value:0,disabled:this.isInfo}],status:[{value:null==e?void 0:e.status,disabled:this.isInfo}],description:[{value:null,disabled:this.isInfo}]})),null===(u=this.form.get("code"))||void 0===u||u.setValue(null==e?void 0:e.code),null===(f=this.form.get("name"))||void 0===f||f.setValue(null==e?void 0:e.name),null===(g=this.form.get("description"))||void 0===g||g.setValue(null==e?void 0:e.description)}resetForm(){var e,t,i,n;this.form.reset(),null===(e=this.form.get("status"))||void 0===e||e.setValue(!0),null===(t=this.form.get("order"))||void 0===t||t.setValue(0),null===(i=this.form.get("code"))||void 0===i||i.setValue(""),null===(n=this.form.get("name"))||void 0===n||n.setValue("")}closeModalReloadData(){this.resetForm(),this.isVisible=!1,this.eventEmmit.emit({type:"success"})}save(e=!1){this.isLoading=!0,Object(d.B)(this.form);for(const i in this.form.controls)this.form.controls[i].markAsDirty(),this.form.controls[i].updateValueAndValidity();if(!this.form.valid)return this.isLoading=!1,void this.messageService.error(""+this.i18n.fanyi("function.country.modal-item.error.message.form-invalid"));const t={id:this.item.id,name:this.form.controls.name.value,code:this.form.controls.code.value.toUpperCase(),status:this.form.controls.status.value,description:this.form.controls.description.value};return null==t.name||""===t.name?(this.isLoading=!1,void this.messageService.error("T\xean lo\u1ea1i h\u1ee3p \u0111\u1ed3ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!")):this.isAdd?this.countryApiService.create(t).subscribe(t=>{this.isLoading=!1,200===t.code&&null!=t.data?(this.messageService.success(""+t.message),this.isReloadGrid=!0,e?this.resetForm():this.closeModalReloadData()):this.messageService.error(""+t.message)},e=>{this.isLoading=!1,this.messageService.error(e.error?""+e.error.message:""+e.status)}):this.isEdit?this.countryApiService.update(t).subscribe(e=>{this.isLoading=!1,200===e.code&&null!=e.data?(this.messageService.success(""+e.message),this.closeModalReloadData()):this.messageService.error(""+e.message)},e=>{this.isLoading=!1,this.messageService.error(e.error?""+e.error.message:""+e.status)}):void 0}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(m.e),h.Ob(u.e),h.Ob(f.e),h.Ob(g.a),h.Ob(r.n),h.Ob(r.a),h.Ob(l.e))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-country-item"]],inputs:{type:"type",item:"item",isVisible:"isVisible",option:"option"},outputs:{eventEmmit:"eventEmmit"},decls:7,vars:4,consts:[["nzMaskClosable","false",3,"nzVisible","nzTitle","nzContent","nzFooter","nzVisibleChange","nzOnCancel"],["modalTitle",""],["modalContent",""],["modalFooter",""],["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","code",3,"nzSm","nzXs"],["nzHasFeedback","",3,"nzSm","nzXs","nzErrorTip"],["nz-input","","minlength","1","maxlength","70","required","","formControlName","code","id","code",2,"text-transform","uppercase",3,"placeholder"],["validateCode",""],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nz-input","","minlength","1","maxlength","256","required","","formControlName","name","id","name",3,"placeholder"],["validateName",""],["nz-row",""],["nzFor","status",3,"nzSm","nzXs"],[3,"nzSpan"],["formControlName","status","nzSize","small",2,"margin-right","5px"],[3,"nzColor","hidden"],[2,"margin-bottom","0"],["nzFor","description",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["rows","3","nz-input","","id","description","formControlName","description",3,"placeholder"],[4,"ngIf"],["nz-button","","nzType","primary","class","btn-secondary",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-primary",3,"nzLoading","disabled","click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-warning",3,"click",4,"ngIf"],["nz-button","","nzType","primary",1,"btn-secondary",3,"click"],["nz-icon","","nzType","edit","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-primary",3,"nzLoading","disabled","click"],["nz-icon","","nzType","save","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-warning",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","fill"]],template:function(e,t){if(1&e&&(h.Ub(0,"nz-modal",0),h.bc("nzVisibleChange",(function(e){return t.isVisible=e}))("nzOnCancel",(function(){return t.handleCancel()})),h.Lc(1,N,1,1,"ng-template",null,1,h.Mc),h.Lc(3,F,39,49,"ng-template",null,2,h.Mc),h.Lc(5,B,3,3,"ng-template",null,3,h.Mc),h.Tb()),2&e){const e=h.xc(2),i=h.xc(4),n=h.xc(6);h.nc("nzVisible",t.isVisible)("nzTitle",e)("nzContent",i)("nzFooter",n)}},directives:[p.a,m.x,m.p,z.b,m.h,v.c,z.c,v.a,z.d,z.a,y.b,m.d,m.k,m.j,m.v,m.o,m.g,A.a,S.a,l.o,T.a,C.a,w.a,I.a],pipes:[D.c],styles:[""]}),e})();var H=i("bNXi"),$=i("qBMM"),j=i("JA5x"),Y=i("yNE/"),J=i("zAKX"),Q=i("NhFE"),K=i("8dLC");function Z(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",32),h.bc("click",(function(t){return h.Ac(e),h.fc().btnReload.click(t)})),h.Pb(1,"i",33),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnReload.titlei18n," ")}}function _(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",34),h.bc("click",(function(t){return h.Ac(e),h.fc().btnAdd.click(t)})),h.Pb(1,"i",35),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc(" ",e.btnAdd.titlei18n," ")}}function ee(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",36),h.bc("click",(function(t){return h.Ac(e),h.fc().btnDelete.click(t)})),h.Pb(1,"i",37),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnDelete.titlei18n," ")}}function te(e,t){1&e&&h.Pb(0,"i",41)}function ie(e,t){1&e&&h.Pb(0,"i",42)}function ne(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",38),h.bc("click",(function(){h.Ac(e);const t=h.fc();return t.filter.ShowAdSearch=!t.filter.ShowAdSearch,t.onResetSearch(!0)})),h.gc(1,"translate"),h.Lc(2,te,1,0,"i",39),h.Lc(3,ie,1,0,"i",40),h.Tb()}if(2&e){const e=h.fc();h.oc("title",h.hc(1,3,"layout.button.btn-show-ad-search.label")),h.Ab(2),h.nc("ngIf",!e.filter.ShowAdSearch),h.Ab(1),h.nc("ngIf",e.filter.ShowAdSearch)}}function oe(e,t){if(1&e&&h.Pb(0,"nz-option",43),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}const ae=function(){return["/"]};let se=(()=>{class e{constructor(e,t,i,o,a,s,c){this.countryApiService=e,this.aclService=t,this.notification=i,this.elementRef=o,this.settings=a,this.i18n=s,this.doc=c,this.isRenderComplete=!1,this.listStatus=d.m,this.filter=Object.assign({},d.s),this.pageSizeOptions=[],this.paginationMessage="",this.columnDefs=[],this.grid={dataCount:0,rowData:[],totalData:0},this.modules=[b.a],this.rowSelection="multiple",this.overlayLoadingTemplate=d.p,this.overlayNoRowsTemplate=d.q,this.quickText="",this.isLoadingDelete=!1,this.isShowDelete=!1,this.isShowImport=!1,this.tittle=""+this.i18n.fanyi("function.country.title"),this.modal={type:"",item:{},isShow:!1,option:{}},this.columnDefs=[{field:"index",headerName:""+this.i18n.fanyi("layout.grid.index"),width:150,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0},{field:"code",headerName:""+this.i18n.fanyi("function.country.grid.code"),minWidth:180,flex:1},{field:"name",headerName:""+this.i18n.fanyi("function.country.grid.name"),sortable:!0,filter:!0,minWidth:180,flex:1},{field:"status",headerName:""+this.i18n.fanyi("function.country.grid.status"),minWidth:150,cellRenderer:"statusNameCellRender"},{headerName:""+this.i18n.fanyi("layout.grid.action"),minWidth:150,cellRenderer:"btnCellRender",cellRendererParams:{infoClicked:e=>this.onViewItem(e),editClicked:e=>this.onEditItem(e),deleteClicked:e=>this.onDeleteItem(e)}}],this.defaultColDef={minWidth:100,resizable:!0},this.frameworkComponents={btnCellRender:n.a,dateCellRender:n.e,statusNameCellRender:n.q},this.excelStyles=[...d.b],this.btnAdd={title:"Th\xeam m\u1edbi",titlei18n:""+this.i18n.fanyi("layout.button.btn-add.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onAddItem()}},this.btnDelete={title:"X\xf3a",titlei18n:""+this.i18n.fanyi("layout.button.btn-delete.label"),visible:!1,enable:!0,grandAccess:!0,click:e=>{this.onDeleteItem()}},this.btnSearch={title:"T\xecm ki\u1ebfm",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.initGridData()}},this.btnResetSearch={title:"\u0110\u1eb7t l\u1ea1i",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onResetSearch(!1)}},this.btnReload={title:"T\u1ea3i l\u1ea1i",titlei18n:""+this.i18n.fanyi("layout.button.btn-reload.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onResetSearch(!0)}}}ngOnInit(){this.initRightOfUser(),this.isRenderComplete=!0}initRightOfUser(){this.btnAdd.grandAccess=this.aclService.canAbility("COUNTRY-ADD"),this.btnDelete.grandAccess=this.aclService.canAbility("COUNTRY-DELETE")}onPageSizeChange(){this.initGridData()}onPageNumberChange(){this.initGridData()}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.initGridData()}approvePerfectScrollbar(){const e=this.elementRef.nativeElement.querySelector(".ag-body-viewport"),t=this.elementRef.nativeElement.querySelector(".ag-body-horizontal-scroll-viewport");e&&new c.a(e).update(),t&&new c.a(t).update()}onSelectionChanged(e){const t=this.gridApi.getSelectedRows();this.btnDelete.visible=t.length>0}onCellDoubleClicked(e){this.onViewItem(e.data)}onResetSearch(e){this.filter.pageNumber=1,this.filter.textSearch=void 0,this.filter.status=null,e&&this.initGridData()}onAddItem(){this.modal={type:"add",item:{},isShow:!0,option:{}},this.itemModal.initData({},"add")}onEditItem(e=null){return Object(s.b)(this,void 0,void 0,(function*(){const t=yield this.getById(e.id);200===t.code&&null!=t.data?(this.modal={type:"edit",item:e,isShow:!0,option:{}},this.itemModal.initData(t.data,"edit")):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+t.message)}))}onViewItem(e=null){return Object(s.b)(this,void 0,void 0,(function*(){const t=yield this.getById(e.id);200===t.code&&null!=t.data?(this.modal={type:"info",item:e,isShow:!0,option:{}},this.itemModal.initData(t.data,"info")):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+t.message)}))}onDeleteItem(e=null){let t=this.gridApi.getSelectedRows();null!==e&&(t=[],t.push(e));let i="";i=t.length>1?""+this.i18n.fanyi("layout-modal.delete.message.many"):""+this.i18n.fanyi("layout-modal.delete.message.one"),this.isShowDelete=!0,this.deleteModal.initData(t,i)}changeStatus(e){this.filter.status=e,this.initGridData()}onModalEventEmmit(e){this.modal.isShow=!1,"success"===e.type&&this.initGridData()}onDeleteEventEmmit(e){"success"===e.type?this.initGridData():"confirm"===e.type&&(this.deleteModal.updateIsLoading(!0),this.deleteListItem(e.listId))}onImportEventEmmit(e){"success"===e.type&&this.initGridData()}deleteListItem(e){return this.isLoadingDelete=!0,this.countryApiService.delete(e).subscribe(e=>{this.isLoadingDelete=!1,200===e.code&&null!=e.data?this.deleteModal.updateData(e.data):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message)},e=>{this.isLoadingDelete=!1,this.deleteModal.updateData(void 0),this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",e.error?""+e.error.message:""+e.status)})}getById(e){return Object(s.b)(this,void 0,void 0,(function*(){return this.countryApiService.getById(e).toPromise()}))}initGridData(){return this.btnDelete.visible=!1,this.gridApi.showLoadingOverlay(),this.countryApiService.getFilter(this.filter).subscribe(e=>{var t;if(this.gridApi.hideOverlay(),200!==e.code)return void this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message);if(null==e.data)return void this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message);const i=e.data;let n=(void 0===this.filter.pageSize?0:this.filter.pageSize)*((void 0===this.filter.pageNumber?0:this.filter.pageNumber)-1);this.paginationMessage=`Hi\u1ec3n th\u1ecb <b>${n+1} - ${n+i.dataCount}</b> tr\xean t\u1ed5ng s\u1ed1 <b>${i.totalCount}</b> k\u1ebft qu\u1ea3`;for(const o of i.data)o.index=++n,o.statusName=null===(t=this.listStatus.find(e=>e.id===o.status))||void 0===t?void 0:t.name,o.infoGrantAccess=!0,o.editGrantAccess=this.aclService.canAbility("COUNTRY-EDIT"),o.deleteGrantAccess=this.aclService.canAbility("COUNTRY-DELETE");this.grid.totalData=i.totalCount,this.grid.dataCount=i.dataCount,this.grid.rowData=i.data,this.pageSizeOptions=[...d.r],this.pageSizeOptions=this.pageSizeOptions.filter(e=>e<i.totalCount),this.pageSizeOptions.push(i.totalCount)},e=>{this.gridApi.hideOverlay()})}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(f.e),h.Ob(g.a),h.Ob(H.b),h.Ob(h.l),h.Ob(r.n),h.Ob(r.a),h.Ob(l.e))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-country-type"]],viewQuery:function(e,t){var i;1&e&&(h.Sc(W,!0),h.Sc(n.f,!0)),2&e&&(h.wc(i=h.cc())&&(t.itemModal=i.first),h.wc(i=h.cc())&&(t.deleteModal=i.first))},decls:50,vars:45,consts:[["onBack","{() => window.history.back()}",3,"title"],[1,"card-header"],["nz-row","",1,"header"],["nz-col","","nzSpan","12"],[3,"routerLink"],["nz-icon","","nzType","home"],["nz-col","","nzSpan","12",2,"text-align","right"],[3,"nzBordered"],["nzSm","10","nzXS","24","nzMd","10",1,"padding-bottom-10"],["nz-button","","nzType","default","class","btn-reload",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-primary",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-danger",3,"click",4,"ngIf"],["nzSm","14","nzXS","24","nzMd","14",1,"pull-right","padding-bottom-10"],["nzJustify","end"],["nzSm","12","nzXS","12","nzMd","12",1,"padding-bottom-10"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["suffixIconButton",""],["nz-row","","nzJustify","start",3,"hidden"],["nzSm","12","nzXS","24","nzMd","12",1,"padding-bottom-10"],[1,"margin-0"],["nzSm","4","nzXS","24","nzMd","4","nzFor","status"],["nzSm","18","nzXS","24","nzMd","18"],["nzShowSearch","","nzAllowClear","",2,"text-align","center",3,"nzPlaceHolder","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["id","unit-grid",1,"ag-theme-alpine",2,"width","100%","height","70vh",3,"modules","columnDefs","defaultColDef","suppressRowClickSelection","rowSelection","rowData","overlayLoadingTemplate","overlayNoRowsTemplate","frameworkComponents","excelStyles","selectionChanged","cellDoubleClicked","gridReady"],["agGrid",""],[3,"grid","filter","pageSizeOptions","pageNumberChange","pageSizeChange"],[3,"isVisible","item","type","option","eventEmmit"],["itemModal",""],[3,"isVisible","eventEmmit"],["deleteModal",""],["nz-button","","nzType","default",1,"btn-reload",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],["nz-button","","nzType","primary",1,"btn-primary",3,"click"],["nz-icon","","nzType","file-add","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-danger",3,"click"],["nz-icon","","nzType","delete","nzTheme","fill"],["nz-button","","nzType","default","nzSearch","",3,"title","click"],["nz-icon","","nzType","caret-down","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","caret-up","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","caret-up","nzTheme","outline"],[3,"nzLabel","nzValue"]],template:function(e,t){if(1&e&&(h.Ub(0,"page-header-wrapper",0),h.Ub(1,"nz-card",1),h.Ub(2,"div",2),h.Ub(3,"div",3),h.Ub(4,"nz-breadcrumb"),h.Ub(5,"nz-breadcrumb-item"),h.Ub(6,"a",4),h.Pb(7,"i",5),h.Tb(),h.Tb(),h.Ub(8,"nz-breadcrumb-item"),h.Ub(9,"a"),h.Ub(10,"span"),h.Nc(11),h.gc(12,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Ub(13,"nz-breadcrumb-item"),h.Ub(14,"a"),h.Nc(15),h.gc(16,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Pb(17,"div",6),h.Tb(),h.Tb(),h.Ub(18,"nz-card",7),h.Ub(19,"nz-row"),h.Ub(20,"nz-col",8),h.Lc(21,Z,3,1,"button",9),h.Lc(22,_,3,1,"button",10),h.Lc(23,ee,3,1,"button",11),h.Tb(),h.Ub(24,"nz-col",12),h.Ub(25,"nz-row",13),h.Ub(26,"nz-col",14),h.Ub(27,"nz-input-group",15),h.Ub(28,"input",16),h.bc("ngModelChange",(function(e){return t.filter.textSearch=e}))("keyup.enter",(function(){return t.initGridData()})),h.gc(29,"translate"),h.Tb(),h.Tb(),h.Lc(30,ne,4,5,"ng-template",null,17,h.Mc),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(32,"div",18),h.Ub(33,"nz-col",19),h.Ub(34,"nz-form-item",20),h.Ub(35,"nz-form-label",21),h.Nc(36),h.gc(37,"translate"),h.Tb(),h.Ub(38,"nz-form-control",22),h.Ub(39,"nz-select",23),h.bc("ngModelChange",(function(e){return t.changeStatus(e)}))("ngModelChange",(function(e){return t.filter.status=e})),h.gc(40,"translate"),h.Lc(41,oe,1,2,"nz-option",24),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(42,"nz-row"),h.Ub(43,"ag-grid-angular",25,26),h.bc("selectionChanged",(function(e){return t.onSelectionChanged(e)}))("cellDoubleClicked",(function(e){return t.onCellDoubleClicked(e)}))("gridReady",(function(e){return t.onGridReady(e)})),h.Tb(),h.Tb(),h.Ub(45,"app-ag-grid-pagination",27),h.bc("pageNumberChange",(function(){return t.onPageNumberChange()}))("pageSizeChange",(function(){return t.onPageSizeChange()})),h.Tb(),h.Tb(),h.Tb(),h.Ub(46,"app-country-item",28,29),h.bc("eventEmmit",(function(e){return t.onModalEventEmmit(e)})),h.Tb(),h.Ub(48,"delete-modal",30,31),h.bc("eventEmmit",(function(e){return t.onDeleteEventEmmit(e)})),h.Tb()),2&e){const e=h.xc(31);h.nc("title",t.tittle),h.Ab(6),h.nc("routerLink",h.rc(44,ae)),h.Ab(5),h.Oc(h.hc(12,34,"menu.resource")),h.Ab(4),h.Pc(" ",h.hc(16,36,"layout.breadcum.country")," "),h.Ab(3),h.nc("nzBordered",!1),h.Ab(3),h.nc("ngIf",t.btnReload.visible&&t.btnReload.grandAccess),h.Ab(1),h.nc("ngIf",t.btnAdd.visible&&t.btnAdd.grandAccess),h.Ab(1),h.nc("ngIf",t.btnDelete.visible&&t.btnDelete.grandAccess),h.Ab(4),h.nc("nzAddOnAfter",e),h.Ab(1),h.oc("placeholder",h.hc(29,38,"layout.grid.search.text-search.placeholder")),h.nc("ngModel",t.filter.textSearch),h.Ab(4),h.nc("hidden",!t.filter.ShowAdSearch),h.Ab(4),h.Oc(h.hc(37,40,"layout.grid.search.status.label")),h.Ab(3),h.oc("nzPlaceHolder",h.hc(40,42,"layout.grid.search.status.placeholder")),h.nc("ngModel",t.filter.status),h.Ab(2),h.nc("ngForOf",t.listStatus),h.Ab(2),h.nc("modules",t.modules)("columnDefs",t.columnDefs)("defaultColDef",t.defaultColDef)("suppressRowClickSelection",!0)("rowSelection",t.rowSelection)("rowData",t.grid.rowData)("overlayLoadingTemplate",t.overlayLoadingTemplate)("overlayNoRowsTemplate",t.overlayNoRowsTemplate)("frameworkComponents",t.frameworkComponents)("excelStyles",t.excelStyles),h.Ab(2),h.nc("grid",t.grid)("filter",t.filter)("pageSizeOptions",t.pageSizeOptions),h.Ab(1),h.nc("isVisible",t.modal.isShow)("item",t.modal.item)("type",t.modal.type)("option",t.modal.option),h.Ab(2),h.nc("isVisible",t.isShowDelete)}},directives:[$.a,j.a,v.c,v.a,Y.a,Y.b,a.m,w.a,I.a,l.o,y.c,y.b,m.d,m.o,m.r,z.c,z.d,z.a,J.e,l.n,o.a,Q.a,W,K.a,T.a,C.a,J.a],pipes:[D.c],styles:[""]}),e})();var ce=i("0bRG");function le(e,t){if(1&e&&h.Nc(0),2&e){const e=h.fc();h.Pc(" ",e.tittle," ")}}function re(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.district.modal-item.code.message.maxlength")))}function de(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.district.modal-item.code.message.minlength")))}function be(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.district.modal-item.code.message.required")))}function he(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.district.modal-item.code.message.pattern")))}function me(e,t){if(1&e&&(h.Lc(0,re,3,3,"ng-container",25),h.Lc(1,de,3,3,"ng-container",25),h.Lc(2,be,3,3,"ng-container",25),h.Lc(3,he,3,3,"ng-container",25)),2&e){const e=t.$implicit;h.nc("ngIf",e.hasError("maxlength")),h.Ab(1),h.nc("ngIf",e.hasError("minlength")),h.Ab(1),h.nc("ngIf",e.hasError("required")),h.Ab(1),h.nc("ngIf",e.hasError("pattern"))}}function ue(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.district.modal-item.name.message.maxlength")))}function fe(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.district.modal-item.name.message.minlength")))}function ge(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.district.modal-item.name.message.required")))}function pe(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.district.modal-item.name.message.pattern")))}function ze(e,t){if(1&e&&(h.Lc(0,ue,3,3,"ng-container",25),h.Lc(1,fe,3,3,"ng-container",25),h.Lc(2,ge,3,3,"ng-container",25),h.Lc(3,pe,3,3,"ng-container",25)),2&e){const e=t.$implicit;h.nc("ngIf",e.hasError("maxlength")),h.Ab(1),h.nc("ngIf",e.hasError("minlength")),h.Ab(1),h.nc("ngIf",e.hasError("required")),h.Ab(1),h.nc("ngIf",e.hasError("pattern"))}}function ve(e,t){if(1&e&&h.Pb(0,"nz-option",26),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}function ye(e,t){if(1&e){const e=h.Vb();h.Ub(0,"form",4),h.bc("ngSubmit",(function(){return h.Ac(e),h.fc().save()})),h.Ub(1,"nz-form-item"),h.Ub(2,"nz-form-label",5),h.Nc(3),h.gc(4,"translate"),h.Tb(),h.Ub(5,"nz-form-control",6),h.Pb(6,"input",7),h.gc(7,"translate"),h.Lc(8,me,4,4,"ng-template",null,8,h.Mc),h.Tb(),h.Tb(),h.Ub(10,"nz-form-item"),h.Ub(11,"nz-form-label",9),h.Nc(12),h.gc(13,"translate"),h.Tb(),h.Ub(14,"nz-form-control",6),h.Pb(15,"input",10),h.gc(16,"translate"),h.Lc(17,ze,4,4,"ng-template",null,11,h.Mc),h.Tb(),h.Tb(),h.Ub(19,"nz-form-item"),h.Ub(20,"nz-form-label",12),h.Nc(21),h.gc(22,"translate"),h.Tb(),h.Ub(23,"nz-form-control",13),h.gc(24,"translate"),h.Ub(25,"nz-select",14),h.gc(26,"translate"),h.Lc(27,ve,1,2,"nz-option",15),h.Tb(),h.Tb(),h.Tb(),h.Ub(28,"nz-form-item",16),h.Ub(29,"nz-form-label",17),h.Nc(30),h.gc(31,"translate"),h.Tb(),h.Ub(32,"nz-form-control",18),h.Pb(33,"nz-switch",19),h.Ub(34,"label"),h.Ub(35,"nz-tag",20),h.Nc(36),h.gc(37,"translate"),h.Tb(),h.Ub(38,"nz-tag",20),h.Nc(39),h.gc(40,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(41,"nz-form-item",21),h.Ub(42,"nz-form-label",22),h.Nc(43),h.gc(44,"translate"),h.Tb(),h.Ub(45,"nz-form-control",23),h.Pb(46,"textarea",24),h.gc(47,"translate"),h.Tb(),h.Tb(),h.Tb()}if(2&e){const e=h.xc(9),t=h.xc(18),i=h.fc();h.nc("formGroup",i.form),h.Ab(2),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(4,39,"function.district.modal-item.code.label")),h.Ab(2),h.nc("nzSm",16)("nzXs",24)("nzErrorTip",e),h.Ab(1),h.oc("placeholder",h.hc(7,41,"function.district.modal-item.code.placeholder")),h.Ab(5),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(13,43,"function.district.modal-item.name.label")),h.Ab(2),h.nc("nzSm",16)("nzXs",24)("nzErrorTip",t),h.Ab(1),h.oc("placeholder",h.hc(16,45,"function.district.modal-item.name.placeholder")),h.Ab(5),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(22,47,"function.district.modal-item.province.label")),h.Ab(2),h.oc("nzErrorTip",h.hc(24,49,"function.ward.modal-item.province-id.error-message.required")),h.nc("nzSm",16)("nzXs",24),h.Ab(2),h.oc("nzPlaceHolder",h.hc(26,51,"function.district.modal-item.search.province.placeholder")),h.Ab(2),h.nc("ngForOf",i.listProvinceName),h.Ab(2),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(31,53,"function.district.modal-item.status.label")),h.Ab(2),h.nc("nzSpan",16),h.Ab(3),h.nc("nzColor","#00BB00")("hidden",!i.form.value.status),h.Ab(1),h.Oc(h.hc(37,55,"function.district.modal-item.status-true.label")),h.Ab(2),h.nc("nzColor","#EF5350")("hidden",i.form.value.status),h.Ab(1),h.Oc(h.hc(40,57,"function.district.modal-item.status-false.label")),h.Ab(3),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Pc(" ",h.hc(44,59,"function.district.modal-item.description.label")," "),h.Ab(2),h.nc("nzSm",16)("nzXs",24),h.Ab(1),h.oc("placeholder",h.hc(47,61,"function.district.modal-item.description.placeholder"))}}function Ae(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",30),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnEdit.click(t)})),h.Pb(1,"i",31),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnEdit.titlei18n," ")}}function Se(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",32),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnSave.click(t)})),h.Pb(1,"i",33),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.nc("nzLoading",e.isLoading)("disabled",e.form.invalid),h.Ab(2),h.Pc("",e.btnSave.titlei18n," ")}}function Te(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",34),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnCancel.click(t)})),h.Pb(1,"i",35),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnCancel.titlei18n," ")}}function Ce(e,t){if(1&e&&(h.Lc(0,Ae,3,1,"button",27),h.Lc(1,Se,3,3,"button",28),h.Lc(2,Te,3,1,"button",29)),2&e){const e=h.fc();h.nc("ngIf",e.isInfo&&e.btnEdit.visible&&e.btnEdit.grandAccess),h.Ab(1),h.nc("ngIf",!e.isInfo&&e.btnSave.visible&&e.btnSave.grandAccess),h.Ab(1),h.nc("ngIf",e.btnCancel.visible&&e.btnCancel.grandAccess)}}let we=(()=>{class e{constructor(e,t,i,n,o,a,s){var c;this.fb=e,this.messageService=t,this.districtApiService=i,this.aclService=n,this.tokenService=o,this.i18n=a,this.doc=s,this.type="add",this.isVisible=!1,this.eventEmmit=new h.n,this.moduleName="qu\u1eadn huy\u1ec7n",this.isInfo=!1,this.isEdit=!1,this.isAdd=!1,this.tittle="",this.listProvinceName=[],this.headerUploadFile={},this.isLoading=!1,this.isReloadGrid=!1,this.regexCode=d.t,this.regexName=d.v;const l=null===(c=o.get())||void 0===c?void 0:c.token;l&&(this.headerUploadFile={Authorization:"Bearer "+l}),this.btnSave={title:"L\u01b0u",titlei18n:""+this.i18n.fanyi("layout.button.btn-save.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.save()}},this.btnSaveAndCreate={title:"L\u01b0u & Th\xeam m\u1edbi",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.save(!0)}},this.btnCancel={title:"\u0110\xf3ng",titlei18n:""+this.i18n.fanyi("layout.button.btn-cancel.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.handleCancel()}},this.btnEdit={title:"C\u1eadp nh\u1eadt",titlei18n:""+this.i18n.fanyi("layout.button.btn-edit.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.updateFormToEdit()}},this.form=this.fb.group({code:[{value:null},[m.w.required,m.w.pattern(d.t)]],name:[null,[m.w.required,m.w.pattern(d.v)]],provinceId:[null,[m.w.required]],order:[null],status:[{value:!0}],description:[null]})}handleCancel(){this.isVisible=!1,this.eventEmmit.emit(this.isReloadGrid?{type:"success"}:{type:"close"})}ngOnInit(){this.initRightOfUser()}initRightOfUser(){this.btnSave.grandAccess=this.aclService.canAbility("DISTRICT-ADD")||this.aclService.canAbility("DISTRICT-EDIT"),this.btnEdit.grandAccess=this.aclService.canAbility("DISTRICT-EDIT"),this.btnSaveAndCreate.grandAccess=this.aclService.canAbility("DISTRICT-ADD")||this.aclService.canAbility("DISTRICT-EDIT")}updateFormToEdit(){var e,t,i,n,o,a;this.updateFormType("edit"),null===(e=this.form.get("name"))||void 0===e||e.enable(),null===(t=this.form.get("order"))||void 0===t||t.enable(),null===(i=this.form.get("status"))||void 0===i||i.enable(),null===(n=this.form.get("provinceId"))||void 0===n||n.enable(),null===(o=this.form.get("description"))||void 0===o||o.enable(),null===(a=this.form.get("countryName"))||void 0===a||a.enable()}updateFormType(e){switch(e){case"add":this.isInfo=!1,this.isEdit=!1,this.isAdd=!0,this.tittle=""+this.i18n.fanyi("function.district.modal-item.header-add");break;case"info":this.isInfo=!0,this.isEdit=!1,this.isAdd=!1,this.tittle=""+this.i18n.fanyi("function.district.modal-item.header-info");break;case"edit":this.isInfo=!1,this.isEdit=!0,this.isAdd=!1,this.tittle=""+this.i18n.fanyi("function.district.modal-item.header-edit");break;default:this.isInfo=!1,this.isEdit=!1,this.isAdd=!0,this.tittle=""+this.i18n.fanyi("function.district.modal-item.header-add")}}initData(e,t=null,i={}){var n,o,a,s,c,l,r,b,h,u,f,g,p,z,v;this.isLoading=!1,this.isReloadGrid=!1,this.item=e,this.type=t,this.option=i,this.listProvinceName=i.listProvinceName,this.updateFormType(t),this.isAdd&&(null===(n=this.form.get("code"))||void 0===n||n.enable(),null===(o=this.form.get("name"))||void 0===o||o.enable(),null===(a=this.form.get("status"))||void 0===a||a.enable(),null===(s=this.form.get("description"))||void 0===s||s.enable(),null===(c=this.form.get("provinceId"))||void 0===c||c.enable(),this.resetForm()),this.isEdit&&(null===(l=this.form.get("code"))||void 0===l||l.disable(),null===(r=this.form.get("name"))||void 0===r||r.enable(),null===(b=this.form.get("status"))||void 0===b||b.enable(),null===(h=this.form.get("description"))||void 0===h||h.enable(),null===(u=this.form.get("provinceId"))||void 0===u||u.enable(),null===(f=this.form.get("provinceId"))||void 0===f||f.setValue(null==e?void 0:e.provinceId),null===(g=this.form.get("status"))||void 0===g||g.setValue(null==e?void 0:e.status)),this.isInfo&&(this.form=this.fb.group({code:[{value:null,disabled:this.isInfo},[m.w.required,m.w.pattern(d.t)]],name:[{value:null,disabled:this.isInfo},[m.w.required,m.w.pattern(d.v)]],provinceId:[{value:null==e?void 0:e.provinceId,disabled:this.isInfo},[m.w.required]],status:[{value:null==e?void 0:e.status,disabled:this.isInfo}],description:[{value:null,disabled:this.isInfo}]})),null===(p=this.form.get("code"))||void 0===p||p.setValue(null==e?void 0:e.code),null===(z=this.form.get("name"))||void 0===z||z.setValue(null==e?void 0:e.name),null===(v=this.form.get("description"))||void 0===v||v.setValue(null==e?void 0:e.description)}resetForm(){var e,t,i,n;this.form.reset(),null===(e=this.form.get("status"))||void 0===e||e.setValue(!0),null===(t=this.form.get("order"))||void 0===t||t.setValue(0),null===(i=this.form.get("code"))||void 0===i||i.setValue(""),null===(n=this.form.get("name"))||void 0===n||n.setValue("")}closeModalReloadData(){this.resetForm(),this.isVisible=!1,this.eventEmmit.emit({type:"success"})}save(e=!1){this.isLoading=!0,Object(d.B)(this.form);for(const i in this.form.controls)this.form.controls[i].markAsDirty(),this.form.controls[i].updateValueAndValidity();if(!this.form.valid)return this.isLoading=!1,void this.messageService.error(""+this.i18n.fanyi("function.district.modal-item.error.message.form-invalid"));const t={id:this.item.id,name:this.form.controls.name.value,code:this.form.controls.code.value.toUpperCase(),provinceId:this.form.controls.provinceId.value,status:this.form.controls.status.value,description:this.form.controls.description.value};return this.isAdd?this.districtApiService.create(t).subscribe(t=>{this.isLoading=!1,200===t.code&&null!=t.data?(this.messageService.success(""+t.message),this.isReloadGrid=!0,e?this.resetForm():this.closeModalReloadData()):this.messageService.error(""+t.message)},e=>{this.isLoading=!1,this.messageService.error(e.error?""+e.error.message:""+e.status)}):this.isEdit?this.districtApiService.update(t).subscribe(e=>{this.isLoading=!1,200===e.code&&null!=e.data?(this.messageService.success(""+e.message),this.closeModalReloadData()):this.messageService.error(""+e.message)},e=>{this.isLoading=!1,this.messageService.error(e.error?""+e.error.message:""+e.status)}):void 0}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(m.e),h.Ob(u.e),h.Ob(f.f),h.Ob(g.a),h.Ob(ce.a),h.Ob(r.a),h.Ob(l.e))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-district-item"]],inputs:{type:"type",item:"item",isVisible:"isVisible",option:"option"},outputs:{eventEmmit:"eventEmmit"},decls:7,vars:4,consts:[["nzMaskClosable","false",3,"nzVisible","nzTitle","nzContent","nzFooter","nzVisibleChange","nzOnCancel"],["modalTitle",""],["modalContent",""],["modalFooter",""],["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","code",3,"nzSm","nzXs"],["nzHasFeedback","",3,"nzSm","nzXs","nzErrorTip"],["nz-input","","minlength","1","maxlength","70","required","","formControlName","code","id","code",2,"text-transform","uppercase",3,"placeholder"],["validateCode",""],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nz-input","","minlength","1","maxlength","256","required","","formControlName","name","id","name",3,"placeholder"],["validateName",""],["nzRequired","","nzFor","countryName",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["formControlName","provinceId",3,"nzPlaceHolder"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-row",""],["nzFor","status",3,"nzSm","nzXs"],[3,"nzSpan"],["formControlName","status","nzSize","small",2,"margin-right","5px"],[3,"nzColor","hidden"],[2,"margin-bottom","0"],["nzFor","description",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["rows","3","nz-input","","id","description","formControlName","description",3,"placeholder"],[4,"ngIf"],[3,"nzLabel","nzValue"],["nz-button","","nzType","primary","class","btn-secondary",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-primary",3,"nzLoading","disabled","click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-warning",3,"click",4,"ngIf"],["nz-button","","nzType","primary",1,"btn-secondary",3,"click"],["nz-icon","","nzType","edit","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-primary",3,"nzLoading","disabled","click"],["nz-icon","","nzType","save","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-warning",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","fill"]],template:function(e,t){if(1&e&&(h.Ub(0,"nz-modal",0),h.bc("nzVisibleChange",(function(e){return t.isVisible=e}))("nzOnCancel",(function(){return t.handleCancel()})),h.Lc(1,le,1,1,"ng-template",null,1,h.Mc),h.Lc(3,ye,48,63,"ng-template",null,2,h.Mc),h.Lc(5,Ce,3,3,"ng-template",null,3,h.Mc),h.Tb()),2&e){const e=h.xc(2),i=h.xc(4),n=h.xc(6);h.nc("nzVisible",t.isVisible)("nzTitle",e)("nzContent",i)("nzFooter",n)}},directives:[p.a,m.x,m.p,z.b,m.h,v.c,z.c,v.a,z.d,z.a,y.b,m.d,m.k,m.j,m.v,m.o,m.g,J.e,l.n,A.a,S.a,l.o,J.a,T.a,C.a,w.a,I.a],pipes:[D.c],styles:[""]}),e})();function Ie(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",35),h.bc("click",(function(t){return h.Ac(e),h.fc().btnReload.click(t)})),h.Pb(1,"i",36),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnReload.titlei18n," ")}}function De(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",37),h.bc("click",(function(t){return h.Ac(e),h.fc().btnAdd.click(t)})),h.Pb(1,"i",38),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnAdd.titlei18n," ")}}function Ne(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",39),h.bc("click",(function(t){return h.Ac(e),h.fc().btnDelete.click(t)})),h.Pb(1,"i",40),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnDelete.titlei18n," ")}}function ke(e,t){1&e&&h.Pb(0,"i",44)}function Ue(e,t){1&e&&h.Pb(0,"i",45)}function Ee(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",41),h.bc("click",(function(){h.Ac(e);const t=h.fc();return t.filter.ShowAdSearch=!t.filter.ShowAdSearch,t.onResetSearch(!0)})),h.gc(1,"translate"),h.Lc(2,ke,1,0,"i",42),h.Lc(3,Ue,1,0,"i",43),h.Tb()}if(2&e){const e=h.fc();h.oc("title",h.hc(1,3,"layout.button.btn-show-ad-search.label")),h.Ab(2),h.nc("ngIf",!e.filter.ShowAdSearch),h.Ab(1),h.nc("ngIf",e.filter.ShowAdSearch)}}function Re(e,t){if(1&e&&h.Pb(0,"nz-option",46),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}function Le(e,t){if(1&e&&h.Pb(0,"nz-option",46),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}const Oe=function(){return["/"]};let xe=(()=>{class e{constructor(e,t,i,o,a,s,c){this.districtApiService=e,this.aclService=t,this.notification=i,this.elementRef=o,this.provinceApiService=a,this.i18n=s,this.doc=c,this.isRenderComplete=!1,this.listStatus=d.m,this.filter=Object.assign({},d.s),this.pageSizeOptions=[],this.paginationMessage="",this.columnDefs=[],this.grid={dataCount:0,rowData:[],totalData:0},this.modules=[b.a],this.rowSelection="multiple",this.overlayLoadingTemplate=d.p,this.overlayNoRowsTemplate=d.q,this.quickText="",this.isLoadingDelete=!1,this.isShowDelete=!1,this.isShowImport=!1,this.tittle=""+this.i18n.fanyi("function.district.title"),this.modal={type:"",item:{},isShow:!1,option:{}},this.listProvinceName=[],this.columnDefs=[{field:"index",headerName:""+this.i18n.fanyi("layout.grid.index"),width:150,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0},{field:"code",headerName:""+this.i18n.fanyi("function.district.grid.code"),minWidth:180,flex:1},{field:"name",headerName:""+this.i18n.fanyi("function.district.grid.name"),sortable:!0,filter:!0,minWidth:180,flex:1},{field:"provinceName",headerName:""+this.i18n.fanyi("function.district.grid.provincename"),sortable:!0,filter:!0,minWidth:180,flex:1},{field:"status",headerName:""+this.i18n.fanyi("function.district.grid.status"),minWidth:150,cellRenderer:"statusNameCellRender"},{headerName:""+this.i18n.fanyi("layout.grid.action"),minWidth:150,cellRenderer:"btnCellRender",cellRendererParams:{infoClicked:e=>this.onViewItem(e),editClicked:e=>this.onEditItem(e),deleteClicked:e=>this.onDeleteItem(e)}}],this.defaultColDef={minWidth:100,resizable:!0},this.frameworkComponents={btnCellRender:n.a,dateCellRender:n.e,statusNameCellRender:n.q},this.excelStyles=[...d.b],this.btnAdd={title:"Th\xeam m\u1edbi",titlei18n:""+this.i18n.fanyi("layout.button.btn-add.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onAddItem()}},this.btnDelete={title:"X\xf3a",titlei18n:""+this.i18n.fanyi("layout.button.btn-delete.label"),visible:!1,enable:!0,grandAccess:!0,click:e=>{this.onDeleteItem()}},this.btnSearch={title:"T\xecm ki\u1ebfm",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.initGridData()}},this.btnResetSearch={title:"\u0110\u1eb7t l\u1ea1i",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onResetSearch(!1)}},this.btnReload={title:"T\u1ea3i l\u1ea1i",titlei18n:""+this.i18n.fanyi("layout.button.btn-reload.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onResetSearch(!0)}}}ngOnInit(){this.initRightOfUser(),this.isRenderComplete=!0,this.loadComboBoxData()}initRightOfUser(){this.btnAdd.grandAccess=this.aclService.canAbility("DISTRICT-ADD"),this.btnDelete.grandAccess=this.aclService.canAbility("DISTRICT-DELETE")}onPageSizeChange(){this.initGridData()}onPageNumberChange(){this.initGridData()}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.initGridData()}approvePerfectScrollbar(){const e=this.elementRef.nativeElement.querySelector(".ag-body-viewport"),t=this.elementRef.nativeElement.querySelector(".ag-body-horizontal-scroll-viewport");e&&new c.a(e).update(),t&&new c.a(t).update()}onSelectionChanged(e){const t=this.gridApi.getSelectedRows();this.btnDelete.visible=t.length>0}onCellDoubleClicked(e){this.onViewItem(e.data)}onResetSearch(e){this.filter.pageNumber=1,this.filter.textSearch=void 0,this.filter.status=null,this.filter.countryId=null,e&&this.initGridData()}onAddItem(){this.modal={type:"add",item:{},isShow:!0,option:{}},this.itemModal.initData({},"add",{listProvinceName:this.listProvinceName})}onEditItem(e=null){return Object(s.b)(this,void 0,void 0,(function*(){const t=yield this.getById(e.id);200===t.code&&null!=t.data?(this.modal={type:"edit",item:e,isShow:!0,option:{}},this.itemModal.initData(t.data,"edit",{listProvinceName:this.listProvinceName})):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+t.message)}))}onViewItem(e=null){return Object(s.b)(this,void 0,void 0,(function*(){const t=yield this.getById(e.id);200===t.code&&null!=t.data?(this.modal={type:"info",item:e,isShow:!0,option:{}},this.itemModal.initData(t.data,"info",{listProvinceName:this.listProvinceName})):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+t.message)}))}onDeleteItem(e=null){let t=this.gridApi.getSelectedRows();null!==e&&(t=[],t.push(e));let i="";i=t.length>1?""+this.i18n.fanyi("layout-modal.delete.message.many"):""+this.i18n.fanyi("layout-modal.delete.message.one"),this.isShowDelete=!0,this.deleteModal.initData(t,i)}changeStatus(e){this.filter.status=e,this.initGridData()}changeProvince(e){this.filter.provinceId=e,this.initGridData()}onModalEventEmmit(e){this.modal.isShow=!1,"success"===e.type&&this.initGridData()}onDeleteEventEmmit(e){"success"===e.type?this.initGridData():"confirm"===e.type&&(this.deleteModal.updateIsLoading(!0),this.deleteListItem(e.listId))}onImportEventEmmit(e){"success"===e.type&&this.initGridData()}deleteListItem(e){return this.isLoadingDelete=!0,this.districtApiService.delete(e).subscribe(e=>{this.isLoadingDelete=!1,200===e.code&&null!=e.data?this.deleteModal.updateData(e.data):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message)},e=>{this.isLoadingDelete=!1,this.deleteModal.updateData(void 0),this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",e.error?""+e.error.message:""+e.status)})}loadComboBoxData(){this.provinceApiService.getListCombobox().subscribe(e=>{this.listProvinceName=e.data})}getById(e){return Object(s.b)(this,void 0,void 0,(function*(){return this.districtApiService.getById(e).toPromise()}))}initGridData(){return this.btnDelete.visible=!1,this.gridApi.showLoadingOverlay(),this.districtApiService.getFilter(this.filter).subscribe(e=>{var t;if(this.gridApi.hideOverlay(),200!==e.code)return void this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message);if(null==e.data)return void this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message);const i=e.data;let n=(void 0===this.filter.pageSize?0:this.filter.pageSize)*((void 0===this.filter.pageNumber?0:this.filter.pageNumber)-1);this.paginationMessage=`Hi\u1ec3n th\u1ecb <b>${n+1} - ${n+i.dataCount}</b> tr\xean t\u1ed5ng s\u1ed1 <b>${i.totalCount}</b> k\u1ebft qu\u1ea3`;for(const o of i.data)o.index=++n,o.statusName=null===(t=this.listStatus.find(e=>e.id===o.status))||void 0===t?void 0:t.name,o.infoGrantAccess=!0,o.editGrantAccess=this.aclService.canAbility("DISTRICT-EDIT"),o.deleteGrantAccess=this.aclService.canAbility("DISTRICT-DELETE");this.grid.totalData=i.totalCount,this.grid.dataCount=i.dataCount,this.grid.rowData=i.data,this.pageSizeOptions=[...d.r],this.pageSizeOptions=this.pageSizeOptions.filter(e=>e<i.totalCount),this.pageSizeOptions.push(i.totalCount)},e=>{this.gridApi.hideOverlay()})}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(f.f),h.Ob(g.a),h.Ob(H.b),h.Ob(h.l),h.Ob(f.q),h.Ob(r.a),h.Ob(l.e))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-district"]],viewQuery:function(e,t){var i;1&e&&(h.Sc(we,!0),h.Sc(n.f,!0)),2&e&&(h.wc(i=h.cc())&&(t.itemModal=i.first),h.wc(i=h.cc())&&(t.deleteModal=i.first))},decls:59,vars:57,consts:[["onBack","{() => window.history.back()}",3,"title"],[1,"card-header"],["nz-row","",1,"header"],["nz-col","","nzSpan","12"],[3,"routerLink"],["nz-icon","","nzType","home"],["nz-col","","nzSpan","12",2,"text-align","right"],[3,"nzBordered"],["nzSm","10","nzXS","24","nzMd","10",1,"padding-bottom-10"],["nz-button","","nzType","default","class","btn-reload",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-primary",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-danger",3,"click",4,"ngIf"],["nzSm","14","nzXS","24","nzMd","14",1,"pull-right","padding-bottom-10"],["nzJustify","end"],["nzSm","12","nzXS","12","nzMd","12",1,"padding-bottom-10"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["suffixIconButton",""],["nz-row","","nzJustify","start",3,"hidden"],[1,"margin-0"],["nzSm","4","nzXS","24","nzMd","4","nzFor","status"],["nzSm","16","nzXS","24","nzMd","16"],["nzShowSearch","","nzAllowClear","",2,"text-align","center",3,"nzPlaceHolder","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzSm","10","nzXS","12","nzMd","10","nzLg","10","nzXl","10",1,"padding-bottom-10"],["nzMd","8",3,"nzSm","nzXs"],["nzMd","15",3,"nzSm","nzXs"],["nzShowSearch","","name","provinceId","nzAllowClear","",3,"ngModel","nzPlaceHolder","ngModelChange"],["id","unit-grid",1,"ag-theme-alpine",2,"width","100%","height","70vh",3,"modules","columnDefs","defaultColDef","suppressRowClickSelection","rowSelection","rowData","overlayLoadingTemplate","overlayNoRowsTemplate","frameworkComponents","excelStyles","selectionChanged","cellDoubleClicked","gridReady"],["agGrid",""],[3,"grid","filter","pageSizeOptions","pageNumberChange","pageSizeChange"],[3,"isVisible","item","type","option","eventEmmit"],["itemModal",""],[3,"isVisible","eventEmmit"],["deleteModal",""],["nz-button","","nzType","default",1,"btn-reload",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],["nz-button","","nzType","primary",1,"btn-primary",3,"click"],["nz-icon","","nzType","file-add","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-danger",3,"click"],["nz-icon","","nzType","delete","nzTheme","fill"],["nz-button","","nzType","default","nzSearch","",3,"title","click"],["nz-icon","","nzType","caret-down","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","caret-up","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","caret-up","nzTheme","outline"],[3,"nzLabel","nzValue"]],template:function(e,t){if(1&e&&(h.Ub(0,"page-header-wrapper",0),h.Ub(1,"nz-card",1),h.Ub(2,"div",2),h.Ub(3,"div",3),h.Ub(4,"nz-breadcrumb"),h.Ub(5,"nz-breadcrumb-item"),h.Ub(6,"a",4),h.Pb(7,"i",5),h.Tb(),h.Tb(),h.Ub(8,"nz-breadcrumb-item"),h.Ub(9,"a"),h.Ub(10,"span"),h.Nc(11),h.gc(12,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Ub(13,"nz-breadcrumb-item"),h.Ub(14,"a"),h.Nc(15),h.gc(16,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Pb(17,"div",6),h.Tb(),h.Tb(),h.Ub(18,"nz-card",7),h.Ub(19,"nz-row"),h.Ub(20,"nz-col",8),h.Lc(21,Ie,3,1,"button",9),h.Lc(22,De,3,1,"button",10),h.Lc(23,Ne,3,1,"button",11),h.Tb(),h.Ub(24,"nz-col",12),h.Ub(25,"nz-row",13),h.Ub(26,"nz-col",14),h.Ub(27,"nz-input-group",15),h.Ub(28,"input",16),h.bc("ngModelChange",(function(e){return t.filter.textSearch=e}))("keyup.enter",(function(){return t.initGridData()})),h.gc(29,"translate"),h.Tb(),h.Tb(),h.Lc(30,Ee,4,5,"ng-template",null,17,h.Mc),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(32,"div",18),h.Ub(33,"nz-col",8),h.Ub(34,"nz-form-item",19),h.Ub(35,"nz-form-label",20),h.Nc(36),h.gc(37,"translate"),h.Tb(),h.Ub(38,"nz-form-control",21),h.Ub(39,"nz-select",22),h.bc("ngModelChange",(function(e){return t.changeStatus(e)}))("ngModelChange",(function(e){return t.filter.status=e})),h.gc(40,"translate"),h.Lc(41,Re,1,2,"nz-option",23),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(42,"nz-col",24),h.Ub(43,"nz-form-item",19),h.Ub(44,"nz-form-label",25),h.Nc(45),h.gc(46,"translate"),h.Tb(),h.Ub(47,"nz-form-control",26),h.Ub(48,"nz-select",27),h.bc("ngModelChange",(function(e){return t.filter.provinceId=e}))("ngModelChange",(function(e){return t.changeProvince(e)})),h.gc(49,"translate"),h.Lc(50,Le,1,2,"nz-option",23),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(51,"nz-row"),h.Ub(52,"ag-grid-angular",28,29),h.bc("selectionChanged",(function(e){return t.onSelectionChanged(e)}))("cellDoubleClicked",(function(e){return t.onCellDoubleClicked(e)}))("gridReady",(function(e){return t.onGridReady(e)})),h.Tb(),h.Tb(),h.Ub(54,"app-ag-grid-pagination",30),h.bc("pageNumberChange",(function(){return t.onPageNumberChange()}))("pageSizeChange",(function(){return t.onPageSizeChange()})),h.Tb(),h.Tb(),h.Tb(),h.Ub(55,"app-district-item",31,32),h.bc("eventEmmit",(function(e){return t.onModalEventEmmit(e)})),h.Tb(),h.Ub(57,"delete-modal",33,34),h.bc("eventEmmit",(function(e){return t.onDeleteEventEmmit(e)})),h.Tb()),2&e){const e=h.xc(31);h.nc("title",t.tittle),h.Ab(6),h.nc("routerLink",h.rc(56,Oe)),h.Ab(5),h.Oc(h.hc(12,42,"menu.resource")),h.Ab(4),h.Pc(" ",h.hc(16,44,"layout.breadcum.district")," "),h.Ab(3),h.nc("nzBordered",!1),h.Ab(3),h.nc("ngIf",t.btnReload.visible&&t.btnReload.grandAccess),h.Ab(1),h.nc("ngIf",t.btnAdd.visible&&t.btnAdd.grandAccess),h.Ab(1),h.nc("ngIf",t.btnDelete.visible&&t.btnDelete.grandAccess),h.Ab(4),h.nc("nzAddOnAfter",e),h.Ab(1),h.oc("placeholder",h.hc(29,46,"layout.grid.search.text-search.placeholder")),h.nc("ngModel",t.filter.textSearch),h.Ab(4),h.nc("hidden",t.filter.ShowAdSearch),h.Ab(4),h.Oc(h.hc(37,48,"layout.grid.search.status.label")),h.Ab(3),h.oc("nzPlaceHolder",h.hc(40,50,"layout.grid.search.status.placeholder")),h.nc("ngModel",t.filter.status),h.Ab(2),h.nc("ngForOf",t.listStatus),h.Ab(3),h.nc("nzSm",8)("nzXs",24),h.Ab(1),h.Oc(h.hc(46,52,"function.district.grid.province.label")),h.Ab(2),h.nc("nzSm",15)("nzXs",24),h.Ab(1),h.oc("nzPlaceHolder",h.hc(49,54,"function.district.grid.province.placeholder")),h.nc("ngModel",t.filter.provinceId),h.Ab(2),h.nc("ngForOf",t.listProvinceName),h.Ab(2),h.nc("modules",t.modules)("columnDefs",t.columnDefs)("defaultColDef",t.defaultColDef)("suppressRowClickSelection",!0)("rowSelection",t.rowSelection)("rowData",t.grid.rowData)("overlayLoadingTemplate",t.overlayLoadingTemplate)("overlayNoRowsTemplate",t.overlayNoRowsTemplate)("frameworkComponents",t.frameworkComponents)("excelStyles",t.excelStyles),h.Ab(2),h.nc("grid",t.grid)("filter",t.filter)("pageSizeOptions",t.pageSizeOptions),h.Ab(1),h.nc("isVisible",t.modal.isShow)("item",t.modal.item)("type",t.modal.type)("option",t.modal.option),h.Ab(2),h.nc("isVisible",t.isShowDelete)}},directives:[$.a,j.a,v.c,v.a,Y.a,Y.b,a.m,w.a,I.a,l.o,y.c,y.b,m.d,m.o,m.r,z.c,z.d,z.a,J.e,l.n,o.a,Q.a,we,K.a,T.a,C.a,J.a],pipes:[D.c],styles:[""]}),e})();function Pe(e,t){if(1&e&&h.Nc(0),2&e){const e=h.fc();h.Pc(" ",e.tittle," ")}}function Me(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.province.modal-item.code.message.maxlength")))}function Ve(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.province.modal-item.code.message.minlength")))}function Fe(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.province.modal-item.code.message.required")))}function Xe(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.province.modal-item.code.message.pattern")))}function Ge(e,t){if(1&e&&(h.Lc(0,Me,3,3,"ng-container",25),h.Lc(1,Ve,3,3,"ng-container",25),h.Lc(2,Fe,3,3,"ng-container",25),h.Lc(3,Xe,3,3,"ng-container",25)),2&e){const e=t.$implicit;h.nc("ngIf",e.hasError("maxlength")),h.Ab(1),h.nc("ngIf",e.hasError("minlength")),h.Ab(1),h.nc("ngIf",e.hasError("required")),h.Ab(1),h.nc("ngIf",e.hasError("pattern"))}}function qe(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.province.modal-item.name.message.maxlength")))}function Be(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.province.modal-item.name.message.minlength")))}function We(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.province.modal-item.name.message.required")))}function He(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.province.modal-item.name.message.pattern")))}function $e(e,t){if(1&e&&(h.Lc(0,qe,3,3,"ng-container",25),h.Lc(1,Be,3,3,"ng-container",25),h.Lc(2,We,3,3,"ng-container",25),h.Lc(3,He,3,3,"ng-container",25)),2&e){const e=t.$implicit;h.nc("ngIf",e.hasError("maxlength")),h.Ab(1),h.nc("ngIf",e.hasError("minlength")),h.Ab(1),h.nc("ngIf",e.hasError("required")),h.Ab(1),h.nc("ngIf",e.hasError("pattern"))}}function je(e,t){if(1&e&&h.Pb(0,"nz-option",26),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}function Ye(e,t){if(1&e){const e=h.Vb();h.Ub(0,"form",4),h.bc("ngSubmit",(function(){return h.Ac(e),h.fc().save()})),h.Ub(1,"nz-form-item"),h.Ub(2,"nz-form-label",5),h.Nc(3),h.gc(4,"translate"),h.Tb(),h.Ub(5,"nz-form-control",6),h.Pb(6,"input",7),h.gc(7,"translate"),h.Lc(8,Ge,4,4,"ng-template",null,8,h.Mc),h.Tb(),h.Tb(),h.Ub(10,"nz-form-item"),h.Ub(11,"nz-form-label",9),h.Nc(12),h.gc(13,"translate"),h.Tb(),h.Ub(14,"nz-form-control",6),h.Pb(15,"input",10),h.gc(16,"translate"),h.Lc(17,$e,4,4,"ng-template",null,11,h.Mc),h.Tb(),h.Tb(),h.Ub(19,"nz-form-item"),h.Ub(20,"nz-form-label",12),h.Nc(21),h.gc(22,"translate"),h.Tb(),h.Ub(23,"nz-form-control",13),h.Ub(24,"nz-select",14),h.gc(25,"translate"),h.Lc(26,je,1,2,"nz-option",15),h.Tb(),h.Tb(),h.Tb(),h.Ub(27,"nz-form-item",16),h.Ub(28,"nz-form-label",17),h.Nc(29),h.gc(30,"translate"),h.Tb(),h.Ub(31,"nz-form-control",18),h.Pb(32,"nz-switch",19),h.Ub(33,"label"),h.Ub(34,"nz-tag",20),h.Nc(35),h.gc(36,"translate"),h.Tb(),h.Ub(37,"nz-tag",20),h.Nc(38),h.gc(39,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(40,"nz-form-item",21),h.Ub(41,"nz-form-label",22),h.Nc(42),h.gc(43,"translate"),h.Tb(),h.Ub(44,"nz-form-control",23),h.Ub(45,"textarea",24),h.gc(46,"translate"),h.Nc(47,"        "),h.Tb(),h.Tb(),h.Tb(),h.Tb()}if(2&e){const e=h.xc(9),t=h.xc(18),i=h.fc();h.nc("formGroup",i.form),h.Ab(2),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(4,38,"function.province.modal-item.code.label")),h.Ab(2),h.nc("nzSm",16)("nzXs",24)("nzErrorTip",e),h.Ab(1),h.oc("placeholder",h.hc(7,40,"function.province.modal-item.code.placeholder")),h.Ab(5),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(13,42,"function.province.modal-item.name.label")),h.Ab(2),h.nc("nzSm",16)("nzXs",24)("nzErrorTip",t),h.Ab(1),h.oc("placeholder",h.hc(16,44,"function.province.modal-item.name.placeholder")),h.Ab(5),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(22,46,"function.province.modal-item.countryname.label")),h.Ab(2),h.nc("nzSm",16)("nzXs",24),h.Ab(1),h.oc("nzPlaceHolder",h.hc(25,48,"function.province.modal-item.search.countryname.placeholder")),h.Ab(2),h.nc("ngForOf",i.listCountryName),h.Ab(2),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(30,50,"function.province.modal-item.status.label")),h.Ab(2),h.nc("nzSpan",16),h.Ab(3),h.nc("nzColor","#00BB00")("hidden",!i.form.value.status),h.Ab(1),h.Oc(h.hc(36,52,"function.province.modal-item.status-true.label")),h.Ab(2),h.nc("nzColor","#EF5350")("hidden",i.form.value.status),h.Ab(1),h.Oc(h.hc(39,54,"function.province.modal-item.status-false.label")),h.Ab(3),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Pc(" ",h.hc(43,56,"function.province.modal-item.description.label")," "),h.Ab(2),h.nc("nzSm",16)("nzXs",24),h.Ab(1),h.oc("placeholder",h.hc(46,58,"function.province.modal-item.description.placeholder"))}}function Je(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",30),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnEdit.click(t)})),h.Pb(1,"i",31),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnEdit.titlei18n," ")}}function Qe(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",32),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnSave.click(t)})),h.Pb(1,"i",33),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.nc("nzLoading",e.isLoading)("disabled",e.form.invalid),h.Ab(2),h.Pc("",e.btnSave.titlei18n," ")}}function Ke(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",34),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnCancel.click(t)})),h.Pb(1,"i",35),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnCancel.titlei18n," ")}}function Ze(e,t){if(1&e&&(h.Lc(0,Je,3,1,"button",27),h.Lc(1,Qe,3,3,"button",28),h.Lc(2,Ke,3,1,"button",29)),2&e){const e=h.fc();h.nc("ngIf",e.isInfo&&e.btnEdit.visible&&e.btnEdit.grandAccess),h.Ab(1),h.nc("ngIf",!e.isInfo&&e.btnSave.visible&&e.btnSave.grandAccess),h.Ab(1),h.nc("ngIf",e.btnCancel.visible&&e.btnCancel.grandAccess)}}let _e=(()=>{class e{constructor(e,t,i,n,o,a,s){var c;this.fb=e,this.messageService=t,this.provinceApiService=i,this.aclService=n,this.tokenService=o,this.i18n=a,this.doc=s,this.type="add",this.isVisible=!1,this.eventEmmit=new h.n,this.moduleName="t\u1ec9nh th\xe0nh",this.isInfo=!1,this.isEdit=!1,this.isAdd=!1,this.tittle="",this.listCountryName=[],this.headerUploadFile={},this.isLoading=!1,this.isReloadGrid=!1,this.regexCode=d.t,this.regexName=d.v;const l=null===(c=o.get())||void 0===c?void 0:c.token;l&&(this.headerUploadFile={Authorization:"Bearer "+l}),this.btnSave={title:"L\u01b0u",titlei18n:""+this.i18n.fanyi("layout.button.btn-save.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.save()}},this.btnSaveAndCreate={title:"L\u01b0u & Th\xeam m\u1edbi",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.save(!0)}},this.btnCancel={title:"\u0110\xf3ng",titlei18n:""+this.i18n.fanyi("layout.button.btn-cancel.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.handleCancel()}},this.btnEdit={title:"C\u1eadp nh\u1eadt",titlei18n:""+this.i18n.fanyi("layout.button.btn-edit.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.updateFormToEdit()}},this.form=this.fb.group({code:[{value:null},[m.w.required,m.w.pattern(d.t)]],name:[null,[m.w.required,m.w.pattern(d.v)]],countryId:[null,[m.w.required]],order:[null],status:[{value:!0}],description:[null]})}handleCancel(){this.isVisible=!1,this.eventEmmit.emit(this.isReloadGrid?{type:"success"}:{type:"close"})}ngOnInit(){this.initRightOfUser()}initRightOfUser(){this.btnSave.grandAccess=this.aclService.canAbility("PROVINCE-ADD")||this.aclService.canAbility("PROVINCE-EDIT"),this.btnEdit.grandAccess=this.aclService.canAbility("PROVINCE-EDIT"),this.btnSaveAndCreate.grandAccess=this.aclService.canAbility("PROVINCE-ADD")||this.aclService.canAbility("PROVINCE-EDIT")}updateFormToEdit(){var e,t,i,n,o,a;this.updateFormType("edit"),null===(e=this.form.get("name"))||void 0===e||e.enable(),null===(t=this.form.get("order"))||void 0===t||t.enable(),null===(i=this.form.get("status"))||void 0===i||i.enable(),null===(n=this.form.get("countryId"))||void 0===n||n.enable(),null===(o=this.form.get("description"))||void 0===o||o.enable(),null===(a=this.form.get("countryName"))||void 0===a||a.enable()}updateFormType(e){switch(e){case"add":this.isInfo=!1,this.isEdit=!1,this.isAdd=!0,this.tittle=""+this.i18n.fanyi("function.province.modal-item.header-add");break;case"info":this.isInfo=!0,this.isEdit=!1,this.isAdd=!1,this.tittle=""+this.i18n.fanyi("function.province.modal-item.header-info");break;case"edit":this.isInfo=!1,this.isEdit=!0,this.isAdd=!1,this.tittle=""+this.i18n.fanyi("function.province.modal-item.header-edit");break;default:this.isInfo=!1,this.isEdit=!1,this.isAdd=!0,this.tittle="Th\xeam m\u1edbi "+this.moduleName}}initData(e,t=null,i={}){var n,o,a,s,c,l,r,b,h,u,f,g,p,z,v;this.isLoading=!1,this.isReloadGrid=!1,this.item=e,this.type=t,this.option=i,this.listCountryName=i.listCountryName,this.updateFormType(t),this.isAdd&&(null===(n=this.form.get("code"))||void 0===n||n.enable(),null===(o=this.form.get("name"))||void 0===o||o.enable(),null===(a=this.form.get("status"))||void 0===a||a.enable(),null===(s=this.form.get("description"))||void 0===s||s.enable(),null===(c=this.form.get("countryId"))||void 0===c||c.enable(),this.resetForm()),this.isEdit&&(null===(l=this.form.get("code"))||void 0===l||l.disable(),null===(r=this.form.get("name"))||void 0===r||r.enable(),null===(b=this.form.get("status"))||void 0===b||b.enable(),null===(h=this.form.get("description"))||void 0===h||h.enable(),null===(u=this.form.get("countryId"))||void 0===u||u.enable(),null===(f=this.form.get("countryId"))||void 0===f||f.setValue(null==e?void 0:e.countryId),null===(g=this.form.get("status"))||void 0===g||g.setValue(null==e?void 0:e.status)),this.isInfo&&(this.form=this.fb.group({code:[{value:null,disabled:this.isInfo},[m.w.required,m.w.pattern(d.t)]],name:[{value:null,disabled:this.isInfo},[m.w.required,m.w.pattern(d.v)]],countryId:[{value:null==e?void 0:e.countryId,disabled:this.isInfo},[m.w.required]],status:[{value:null==e?void 0:e.status,disabled:this.isInfo}],description:[{value:null,disabled:this.isInfo}]})),null===(p=this.form.get("code"))||void 0===p||p.setValue(null==e?void 0:e.code),null===(z=this.form.get("name"))||void 0===z||z.setValue(null==e?void 0:e.name),null===(v=this.form.get("description"))||void 0===v||v.setValue(null==e?void 0:e.description)}resetForm(){var e,t,i,n;this.form.reset(),null===(e=this.form.get("status"))||void 0===e||e.setValue(!0),null===(t=this.form.get("order"))||void 0===t||t.setValue(0),null===(i=this.form.get("code"))||void 0===i||i.setValue(""),null===(n=this.form.get("name"))||void 0===n||n.setValue("")}closeModalReloadData(){this.resetForm(),this.isVisible=!1,this.eventEmmit.emit({type:"success"})}save(e=!1){this.isLoading=!0,Object(d.B)(this.form);for(const i in this.form.controls)this.form.controls[i].markAsDirty(),this.form.controls[i].updateValueAndValidity();if(!this.form.valid)return this.isLoading=!1,void this.messageService.error(""+this.i18n.fanyi("function.province.modal-item.error.message.form-invalid"));const t={id:this.item.id,name:this.form.controls.name.value,code:this.form.controls.code.value.toUpperCase(),countryId:this.form.controls.countryId.value,status:this.form.controls.status.value,description:this.form.controls.description.value};return null==t.name||""===t.name?(this.isLoading=!1,void this.messageService.error("T\xean lo\u1ea1i h\u1ee3p \u0111\u1ed3ng kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!")):this.isAdd?this.provinceApiService.create(t).subscribe(t=>{this.isLoading=!1,200===t.code&&null!=t.data?(this.messageService.success(""+t.message),this.isReloadGrid=!0,e?this.resetForm():this.closeModalReloadData()):this.messageService.error(""+t.message)},e=>{this.isLoading=!1,this.messageService.error(e.error?""+e.error.message:""+e.status)}):this.isEdit?this.provinceApiService.update(t).subscribe(e=>{this.isLoading=!1,200===e.code&&null!=e.data?(this.messageService.success(""+e.message),this.closeModalReloadData()):this.messageService.error(""+e.message)},e=>{this.isLoading=!1,this.messageService.error(e.error?""+e.error.message:""+e.status)}):void 0}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(m.e),h.Ob(u.e),h.Ob(f.q),h.Ob(g.a),h.Ob(ce.a),h.Ob(r.a),h.Ob(l.e))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-province-item"]],inputs:{type:"type",item:"item",isVisible:"isVisible",option:"option"},outputs:{eventEmmit:"eventEmmit"},decls:7,vars:4,consts:[["nzMaskClosable","false",3,"nzVisible","nzTitle","nzContent","nzFooter","nzVisibleChange","nzOnCancel"],["modalTitle",""],["modalContent",""],["modalFooter",""],["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","code",3,"nzSm","nzXs"],["nzHasFeedback","",3,"nzSm","nzXs","nzErrorTip"],["nz-input","","minlength","1","maxlength","70","required","","formControlName","code","id","code",2,"text-transform","uppercase",3,"placeholder"],["validateCode",""],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nz-input","","minlength","1","maxlength","256","required","","formControlName","name","id","name",3,"placeholder"],["validateName",""],["nzRequired","","nzFor","countryName",3,"nzSm","nzXs"],["nzErrorTip","Qu\u1ed1c gia kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!",3,"nzSm","nzXs"],["formControlName","countryId",3,"nzPlaceHolder"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-row",""],["nzFor","status",3,"nzSm","nzXs"],[3,"nzSpan"],["formControlName","status","nzSize","small",2,"margin-right","5px"],[3,"nzColor","hidden"],[2,"margin-bottom","0"],["nzFor","description",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["rows","3","nz-input","","id","description","formControlName","description",3,"placeholder"],[4,"ngIf"],[3,"nzLabel","nzValue"],["nz-button","","nzType","primary","class","btn-secondary",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-primary",3,"nzLoading","disabled","click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-warning",3,"click",4,"ngIf"],["nz-button","","nzType","primary",1,"btn-secondary",3,"click"],["nz-icon","","nzType","edit","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-primary",3,"nzLoading","disabled","click"],["nz-icon","","nzType","save","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-warning",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","fill"]],template:function(e,t){if(1&e&&(h.Ub(0,"nz-modal",0),h.bc("nzVisibleChange",(function(e){return t.isVisible=e}))("nzOnCancel",(function(){return t.handleCancel()})),h.Lc(1,Pe,1,1,"ng-template",null,1,h.Mc),h.Lc(3,Ye,48,60,"ng-template",null,2,h.Mc),h.Lc(5,Ze,3,3,"ng-template",null,3,h.Mc),h.Tb()),2&e){const e=h.xc(2),i=h.xc(4),n=h.xc(6);h.nc("nzVisible",t.isVisible)("nzTitle",e)("nzContent",i)("nzFooter",n)}},directives:[p.a,m.x,m.p,z.b,m.h,v.c,z.c,v.a,z.d,z.a,y.b,m.d,m.k,m.j,m.v,m.o,m.g,J.e,l.n,A.a,S.a,l.o,J.a,T.a,C.a,w.a,I.a],pipes:[D.c],styles:[""]}),e})();function et(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",35),h.bc("click",(function(t){return h.Ac(e),h.fc().btnReload.click(t)})),h.Pb(1,"i",36),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnReload.titlei18n," ")}}function tt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",37),h.bc("click",(function(t){return h.Ac(e),h.fc().btnAdd.click(t)})),h.Pb(1,"i",38),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnAdd.titlei18n," ")}}function it(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",39),h.bc("click",(function(t){return h.Ac(e),h.fc().btnDelete.click(t)})),h.Pb(1,"i",40),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnDelete.titlei18n," ")}}function nt(e,t){1&e&&h.Pb(0,"i",44)}function ot(e,t){1&e&&h.Pb(0,"i",45)}function at(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",41),h.bc("click",(function(){h.Ac(e);const t=h.fc();return t.filter.ShowAdSearch=!t.filter.ShowAdSearch,t.onResetSearch(!0)})),h.gc(1,"translate"),h.Lc(2,nt,1,0,"i",42),h.Lc(3,ot,1,0,"i",43),h.Tb()}if(2&e){const e=h.fc();h.oc("title",h.hc(1,3,"layout.button.btn-show-ad-search.label")),h.Ab(2),h.nc("ngIf",!e.filter.ShowAdSearch),h.Ab(1),h.nc("ngIf",e.filter.ShowAdSearch)}}function st(e,t){if(1&e&&h.Pb(0,"nz-option",46),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}function ct(e,t){if(1&e&&h.Pb(0,"nz-option",46),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}const lt=function(){return["/"]};let rt=(()=>{class e{constructor(e,t,i,o,a,s,c){this.provinceApiService=e,this.aclService=t,this.notification=i,this.elementRef=o,this.countryApiService=a,this.i18n=s,this.doc=c,this.isRenderComplete=!1,this.listStatus=d.m,this.filter=Object.assign({},d.s),this.pageSizeOptions=[],this.paginationMessage="",this.columnDefs=[],this.grid={dataCount:0,rowData:[],totalData:0},this.modules=[b.a],this.rowSelection="multiple",this.overlayLoadingTemplate=d.p,this.overlayNoRowsTemplate=d.q,this.quickText="",this.isLoadingDelete=!1,this.isShowDelete=!1,this.isShowImport=!1,this.tittle=""+this.i18n.fanyi("function.province.title"),this.modal={type:"",item:{},isShow:!1,option:{}},this.listCountryName=[],this.columnDefs=[{field:"index",headerName:""+this.i18n.fanyi("layout.grid.index"),width:150,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0},{field:"code",headerName:""+this.i18n.fanyi("function.province.grid.code"),minWidth:180,flex:1},{field:"name",headerName:""+this.i18n.fanyi("function.province.grid.name"),sortable:!0,filter:!0,minWidth:180,flex:1},{field:"countryName",headerName:""+this.i18n.fanyi("function.province.grid.countryname"),sortable:!0,filter:!0,minWidth:180,flex:1},{field:"status",headerName:""+this.i18n.fanyi("function.province.grid.status"),minWidth:150,cellRenderer:"statusNameCellRender"},{headerName:""+this.i18n.fanyi("layout.grid.action"),minWidth:150,cellRenderer:"btnCellRender",cellRendererParams:{infoClicked:e=>this.onViewItem(e),editClicked:e=>this.onEditItem(e),deleteClicked:e=>this.onDeleteItem(e)}}],this.defaultColDef={minWidth:100,resizable:!0},this.frameworkComponents={btnCellRender:n.a,dateCellRender:n.e,statusNameCellRender:n.q},this.excelStyles=[...d.b],this.btnAdd={title:"Th\xeam m\u1edbi",titlei18n:""+this.i18n.fanyi("layout.button.btn-add.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onAddItem()}},this.btnDelete={title:"X\xf3a",titlei18n:""+this.i18n.fanyi("layout.button.btn-delete.label"),visible:!1,enable:!0,grandAccess:!0,click:e=>{this.onDeleteItem()}},this.btnSearch={title:"T\xecm ki\u1ebfm",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.initGridData()}},this.btnResetSearch={title:"\u0110\u1eb7t l\u1ea1i",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onResetSearch(!1)}},this.btnReload={title:"T\u1ea3i l\u1ea1i",titlei18n:""+this.i18n.fanyi("layout.button.btn-reload.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onResetSearch(!0)}}}ngOnInit(){this.initRightOfUser(),this.isRenderComplete=!0,this.loadComboBoxData()}initRightOfUser(){this.btnAdd.grandAccess=this.aclService.canAbility("PROVINCE-ADD"),this.btnDelete.grandAccess=this.aclService.canAbility("PROVINCE-DELETE")}onPageSizeChange(){this.initGridData()}onPageNumberChange(){this.initGridData()}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.initGridData()}approvePerfectScrollbar(){const e=this.elementRef.nativeElement.querySelector(".ag-body-viewport"),t=this.elementRef.nativeElement.querySelector(".ag-body-horizontal-scroll-viewport");e&&new c.a(e).update(),t&&new c.a(t).update()}onSelectionChanged(e){const t=this.gridApi.getSelectedRows();this.btnDelete.visible=t.length>0}onCellDoubleClicked(e){this.onViewItem(e.data)}onResetSearch(e){this.filter.pageNumber=1,this.filter.textSearch=void 0,this.filter.status=null,this.filter.countryId=null,e&&this.initGridData()}onAddItem(){this.modal={type:"add",item:{},isShow:!0,option:{}},this.itemModal.initData({},"add",{listCountryName:this.listCountryName})}onEditItem(e=null){return Object(s.b)(this,void 0,void 0,(function*(){const t=yield this.getById(e.id);200===t.code&&null!=t.data?(this.modal={type:"edit",item:e,isShow:!0,option:{}},this.itemModal.initData(t.data,"edit",{listCountryName:this.listCountryName})):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+t.message)}))}onViewItem(e=null){return Object(s.b)(this,void 0,void 0,(function*(){const t=yield this.getById(e.id);200===t.code&&null!=t.data?(this.modal={type:"info",item:e,isShow:!0,option:{}},this.itemModal.initData(t.data,"info",{listCountryName:this.listCountryName})):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+t.message)}))}onDeleteItem(e=null){let t=this.gridApi.getSelectedRows();null!==e&&(t=[],t.push(e));let i="";i=t.length>1?""+this.i18n.fanyi("layout-modal.delete.message.many"):""+this.i18n.fanyi("layout-modal.delete.message.one"),this.isShowDelete=!0,this.deleteModal.initData(t,i)}changeStatus(e){this.filter.status=e,this.initGridData()}changeCountry(e){this.filter.countryId=e,this.initGridData()}onModalEventEmmit(e){this.modal.isShow=!1,"success"===e.type&&this.initGridData()}onDeleteEventEmmit(e){"success"===e.type?this.initGridData():"confirm"===e.type&&(this.deleteModal.updateIsLoading(!0),this.deleteListItem(e.listId))}onImportEventEmmit(e){"success"===e.type&&this.initGridData()}deleteListItem(e){return this.isLoadingDelete=!0,this.provinceApiService.delete(e).subscribe(e=>{this.isLoadingDelete=!1,200===e.code&&null!=e.data?this.deleteModal.updateData(e.data):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message)},e=>{this.isLoadingDelete=!1,this.deleteModal.updateData(void 0),this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",e.error?""+e.error.message:""+e.status)})}loadComboBoxData(){this.countryApiService.getListCombobox().subscribe(e=>{this.listCountryName=e.data})}getById(e){return Object(s.b)(this,void 0,void 0,(function*(){return this.provinceApiService.getById(e).toPromise()}))}initGridData(){return this.btnDelete.visible=!1,this.gridApi.showLoadingOverlay(),this.provinceApiService.getFilter(this.filter).subscribe(e=>{var t;if(this.gridApi.hideOverlay(),200!==e.code)return void this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message);if(null==e.data)return void this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message);const i=e.data;let n=(void 0===this.filter.pageSize?0:this.filter.pageSize)*((void 0===this.filter.pageNumber?0:this.filter.pageNumber)-1);this.paginationMessage=`Hi\u1ec3n th\u1ecb <b>${n+1} - ${n+i.dataCount}</b> tr\xean t\u1ed5ng s\u1ed1 <b>${i.totalCount}</b> k\u1ebft qu\u1ea3`;for(const o of i.data)o.index=++n,o.statusName=null===(t=this.listStatus.find(e=>e.id===o.status))||void 0===t?void 0:t.name,o.infoGrantAccess=!0,o.editGrantAccess=this.aclService.canAbility("PROVINCE-EDIT"),o.deleteGrantAccess=this.aclService.canAbility("PROVINCE-DELETE");this.grid.totalData=i.totalCount,this.grid.dataCount=i.dataCount,this.grid.rowData=i.data,this.pageSizeOptions=[...d.r],this.pageSizeOptions=this.pageSizeOptions.filter(e=>e<i.totalCount),this.pageSizeOptions.push(i.totalCount)},e=>{this.gridApi.hideOverlay()})}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(f.q),h.Ob(g.a),h.Ob(H.b),h.Ob(h.l),h.Ob(f.e),h.Ob(r.a),h.Ob(l.e))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-province"]],viewQuery:function(e,t){var i;1&e&&(h.Sc(_e,!0),h.Sc(n.f,!0)),2&e&&(h.wc(i=h.cc())&&(t.itemModal=i.first),h.wc(i=h.cc())&&(t.deleteModal=i.first))},decls:59,vars:57,consts:[["onBack","{() => window.history.back()}",3,"title"],[1,"card-header"],["nz-row","",1,"header"],["nz-col","","nzSpan","12"],[3,"routerLink"],["nz-icon","","nzType","home"],["nz-col","","nzSpan","12",2,"text-align","right"],[3,"nzBordered"],["nzSm","10","nzXS","24","nzMd","10",1,"padding-bottom-10"],["nz-button","","nzType","default","class","btn-reload",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-primary",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-danger",3,"click",4,"ngIf"],["nzSm","14","nzXS","24","nzMd","14",1,"pull-right","padding-bottom-10"],["nzJustify","end"],["nzSm","12","nzXS","12","nzMd","12",1,"padding-bottom-10"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["suffixIconButton",""],["nz-row","","nzJustify","start",3,"hidden"],[1,"margin-0"],["nzSm","4","nzXS","24","nzMd","4","nzFor","status"],["nzSm","16","nzXS","24","nzMd","16"],["nzShowSearch","","nzAllowClear","",2,"text-align","center",3,"nzPlaceHolder","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzSm","10","nzXS","12","nzMd","10","nzLg","10","nzXl","10",1,"padding-bottom-10"],["nzMd","8",3,"nzSm","nzXs"],["nzMd","15",3,"nzSm","nzXs"],["nzShowSearch","","name","countryId","nzAllowClear","",3,"ngModel","nzPlaceHolder","ngModelChange"],["id","unit-grid",1,"ag-theme-alpine",2,"width","100%","height","70vh",3,"modules","columnDefs","defaultColDef","suppressRowClickSelection","rowSelection","rowData","overlayLoadingTemplate","overlayNoRowsTemplate","frameworkComponents","excelStyles","selectionChanged","cellDoubleClicked","gridReady"],["agGrid",""],[3,"grid","filter","pageSizeOptions","pageNumberChange","pageSizeChange"],[3,"isVisible","item","type","option","eventEmmit"],["itemModal",""],[3,"isVisible","eventEmmit"],["deleteModal",""],["nz-button","","nzType","default",1,"btn-reload",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],["nz-button","","nzType","primary",1,"btn-primary",3,"click"],["nz-icon","","nzType","file-add","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-danger",3,"click"],["nz-icon","","nzType","delete","nzTheme","fill"],["nz-button","","nzType","default","nzSearch","",3,"title","click"],["nz-icon","","nzType","caret-down","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","caret-up","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","caret-up","nzTheme","outline"],[3,"nzLabel","nzValue"]],template:function(e,t){if(1&e&&(h.Ub(0,"page-header-wrapper",0),h.Ub(1,"nz-card",1),h.Ub(2,"div",2),h.Ub(3,"div",3),h.Ub(4,"nz-breadcrumb"),h.Ub(5,"nz-breadcrumb-item"),h.Ub(6,"a",4),h.Pb(7,"i",5),h.Tb(),h.Tb(),h.Ub(8,"nz-breadcrumb-item"),h.Ub(9,"a"),h.Ub(10,"span"),h.Nc(11),h.gc(12,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Ub(13,"nz-breadcrumb-item"),h.Ub(14,"a"),h.Nc(15),h.gc(16,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Pb(17,"div",6),h.Tb(),h.Tb(),h.Ub(18,"nz-card",7),h.Ub(19,"nz-row"),h.Ub(20,"nz-col",8),h.Lc(21,et,3,1,"button",9),h.Lc(22,tt,3,1,"button",10),h.Lc(23,it,3,1,"button",11),h.Tb(),h.Ub(24,"nz-col",12),h.Ub(25,"nz-row",13),h.Ub(26,"nz-col",14),h.Ub(27,"nz-input-group",15),h.Ub(28,"input",16),h.bc("ngModelChange",(function(e){return t.filter.textSearch=e}))("keyup.enter",(function(){return t.initGridData()})),h.gc(29,"translate"),h.Tb(),h.Tb(),h.Lc(30,at,4,5,"ng-template",null,17,h.Mc),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(32,"div",18),h.Ub(33,"nz-col",8),h.Ub(34,"nz-form-item",19),h.Ub(35,"nz-form-label",20),h.Nc(36),h.gc(37,"translate"),h.Tb(),h.Ub(38,"nz-form-control",21),h.Ub(39,"nz-select",22),h.bc("ngModelChange",(function(e){return t.changeStatus(e)}))("ngModelChange",(function(e){return t.filter.status=e})),h.gc(40,"translate"),h.Lc(41,st,1,2,"nz-option",23),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(42,"nz-col",24),h.Ub(43,"nz-form-item",19),h.Ub(44,"nz-form-label",25),h.Nc(45),h.gc(46,"translate"),h.Tb(),h.Ub(47,"nz-form-control",26),h.Ub(48,"nz-select",27),h.bc("ngModelChange",(function(e){return t.filter.countryId=e}))("ngModelChange",(function(e){return t.changeCountry(e)})),h.gc(49,"translate"),h.Lc(50,ct,1,2,"nz-option",23),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(51,"nz-row"),h.Ub(52,"ag-grid-angular",28,29),h.bc("selectionChanged",(function(e){return t.onSelectionChanged(e)}))("cellDoubleClicked",(function(e){return t.onCellDoubleClicked(e)}))("gridReady",(function(e){return t.onGridReady(e)})),h.Tb(),h.Tb(),h.Ub(54,"app-ag-grid-pagination",30),h.bc("pageNumberChange",(function(){return t.onPageNumberChange()}))("pageSizeChange",(function(){return t.onPageSizeChange()})),h.Tb(),h.Tb(),h.Tb(),h.Ub(55,"app-province-item",31,32),h.bc("eventEmmit",(function(e){return t.onModalEventEmmit(e)})),h.Tb(),h.Ub(57,"delete-modal",33,34),h.bc("eventEmmit",(function(e){return t.onDeleteEventEmmit(e)})),h.Tb()),2&e){const e=h.xc(31);h.nc("title",t.tittle),h.Ab(6),h.nc("routerLink",h.rc(56,lt)),h.Ab(5),h.Oc(h.hc(12,42,"menu.resource")),h.Ab(4),h.Pc(" ",h.hc(16,44,"layout.breadcum.province")," "),h.Ab(3),h.nc("nzBordered",!1),h.Ab(3),h.nc("ngIf",t.btnReload.visible&&t.btnReload.grandAccess),h.Ab(1),h.nc("ngIf",t.btnAdd.visible&&t.btnAdd.grandAccess),h.Ab(1),h.nc("ngIf",t.btnDelete.visible&&t.btnDelete.grandAccess),h.Ab(4),h.nc("nzAddOnAfter",e),h.Ab(1),h.oc("placeholder",h.hc(29,46,"layout.grid.search.text-search.placeholder")),h.nc("ngModel",t.filter.textSearch),h.Ab(4),h.nc("hidden",t.filter.ShowAdSearch),h.Ab(4),h.Oc(h.hc(37,48,"layout.grid.search.status.label")),h.Ab(3),h.oc("nzPlaceHolder",h.hc(40,50,"layout.grid.search.status.placeholder")),h.nc("ngModel",t.filter.status),h.Ab(2),h.nc("ngForOf",t.listStatus),h.Ab(3),h.nc("nzSm",8)("nzXs",24),h.Ab(1),h.Oc(h.hc(46,52,"function.province.grid.countryname.label")),h.Ab(2),h.nc("nzSm",15)("nzXs",24),h.Ab(1),h.oc("nzPlaceHolder",h.hc(49,54,"function.province.grid.countryname.placeholder")),h.nc("ngModel",t.filter.countryId),h.Ab(2),h.nc("ngForOf",t.listCountryName),h.Ab(2),h.nc("modules",t.modules)("columnDefs",t.columnDefs)("defaultColDef",t.defaultColDef)("suppressRowClickSelection",!0)("rowSelection",t.rowSelection)("rowData",t.grid.rowData)("overlayLoadingTemplate",t.overlayLoadingTemplate)("overlayNoRowsTemplate",t.overlayNoRowsTemplate)("frameworkComponents",t.frameworkComponents)("excelStyles",t.excelStyles),h.Ab(2),h.nc("grid",t.grid)("filter",t.filter)("pageSizeOptions",t.pageSizeOptions),h.Ab(1),h.nc("isVisible",t.modal.isShow)("item",t.modal.item)("type",t.modal.type)("option",t.modal.option),h.Ab(2),h.nc("isVisible",t.isShowDelete)}},directives:[$.a,j.a,v.c,v.a,Y.a,Y.b,a.m,w.a,I.a,l.o,y.c,y.b,m.d,m.o,m.r,z.c,z.d,z.a,J.e,l.n,o.a,Q.a,_e,K.a,T.a,C.a,J.a],pipes:[D.c],styles:[""]}),e})();var dt=i("wd/R"),bt=i("HDdC"),ht=i("quSY"),mt=i("EUZL"),ut=i("D9mS");function ft(e,t){if(1&e&&h.Nc(0),2&e){const e=h.fc();h.Pc(" ",e.tittle," ")}}function gt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"nz-row"),h.Ub(1,"nz-col",4),h.Ub(2,"i"),h.Nc(3,"Click \u0111\xfap chu\u1ed9t v\xe0o t\u1eebng cell \u0111\u1ec3 s\u1eeda d\u1eef li\u1ec7u, sau \u0111\xf3 nh\u1ea5n "),h.Ub(4,"b"),h.Nc(5,'"L\u01b0u"'),h.Tb(),h.Nc(6," \u0111\u1ec3 l\u01b0u d\u1eef li\u1ec7u v\xe0o h\u1ec7 th\u1ed1ng"),h.Tb(),h.Tb(),h.Tb(),h.Ub(7,"nz-row"),h.Ub(8,"ag-grid-angular",5,6),h.bc("gridReady",(function(t){return h.Ac(e),h.fc().onGridReady(t)})),h.Tb(),h.Tb()}if(2&e){const e=h.fc();h.Ab(8),h.nc("columnDefs",e.columnDefs)("defaultColDef",e.defaultColDef)("suppressRowClickSelection",!0)("rowData",e.rowData)("frameworkComponents",e.frameworkComponents)("overlayLoadingTemplate",e.overlayLoadingTemplate)("overlayNoRowsTemplate",e.overlayNoRowsTemplate)("excelStyles",e.excelStyles)}}function pt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",13),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnDownload.click(t)})),h.Pb(1,"i",14),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnDownload.title," ")}}function zt(e,t){if(1&e&&(h.Ub(0,"nz-upload",15),h.Ub(1,"button",16),h.Pb(2,"i",17),h.Nc(3),h.Tb(),h.Tb()),2&e){const e=h.fc(2);h.nc("nzTransformFile",e.transformFile),h.Ab(3),h.Oc(e.btnUpload.title)}}function vt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",18),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnReset.click(t)})),h.Pb(1,"i",19),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnReset.title," ")}}function yt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",20),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnSave.click(t)})),h.Pb(1,"i",21),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.nc("nzLoading",e.isLoading),h.Ab(2),h.Pc("",e.btnSave.title," ")}}function At(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",22),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnCancel.click(t)})),h.Pb(1,"i",23),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnCancel.title," ")}}function St(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",24),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnClose.click(t)})),h.Pb(1,"i",23),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnClose.title," ")}}function Tt(e,t){if(1&e&&(h.Lc(0,pt,3,1,"button",7),h.Lc(1,zt,4,2,"nz-upload",8),h.Lc(2,vt,3,1,"button",9),h.Lc(3,yt,3,2,"button",10),h.Lc(4,At,3,1,"button",11),h.Lc(5,St,3,1,"button",12)),2&e){const e=h.fc();h.nc("ngIf",e.btnDownload.visible&&e.btnDownload.grandAccess&&!e.isCompleteImport),h.Ab(1),h.nc("ngIf",e.btnUpload.visible&&e.btnUpload.grandAccess&&!e.isCompleteImport),h.Ab(1),h.nc("ngIf",e.btnReset.visible&&e.btnReset.grandAccess&&!e.isCompleteImport),h.Ab(1),h.nc("ngIf",e.btnSave.visible&&e.btnSave.grandAccess&&!e.isCompleteImport),h.Ab(1),h.nc("ngIf",e.btnCancel.visible&&e.btnCancel.grandAccess&&!e.isCompleteImport),h.Ab(1),h.nc("ngIf",e.btnClose.visible&&e.btnClose.grandAccess&&e.isCompleteImport)}}let Ct=(()=>{class e{constructor(e,t,i){this.messageService=e,this.unitService=t,this.elementRef=i,this.isVisible=!1,this.eventEmmit=new h.n,this.tittle="Nh\u1eadp d\u1eef li\u1ec7u \u0111\u01a1n v\u1ecb t\xednh t\u1eeb excel",this.moduleName="\u0110\u01a1n v\u1ecb t\xednh",this.isLoading=!1,this.rowData=[],this.overlayLoadingTemplate=d.p,this.overlayNoRowsTemplate=d.q,this.isCompleteImport=!1,this.jsonObject=[],this.excelColumnsMapping=[{gridName:"name",excelName:"T\xean",dataType:"string"},{gridName:"status",excelName:"Tr\u1ea1ng th\xe1i",dataType:"boolean"},{gridName:"order",excelName:"Th\u1ee9 t\u1ef1 s\u1eafp x\u1ebfp",dataType:"number"}],this.transformFile=e=>(this.parseExcel(e),new bt.a(e=>{})),this.convertExcelToGrid=(e,t)=>{this.excelColumnsMapping.forEach(i=>{e[i.gridName]="string"===i.dataType?""+t[i.excelName]:"number"===i.dataType?parseFloat(t[i.excelName]):"boolean"===i.dataType?Object(d.bb)(t[i.excelName]):t[i.excelName]})},this.btnDownload={title:"T\u1ea3i v\u1ec1 m\u1eabu",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onExportExcel()}},this.btnUpload={title:"T\u1ea3i l\xean d\u1eef li\u1ec7u",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{}},this.btnReset={title:"\u0110\u1eb7t l\u1ea1i",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onReset()}},this.btnSave={title:"L\u01b0u",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.save()}},this.btnCancel={title:"\u0110\xf3ng",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.handleCancel()}},this.btnClose={title:"\u0110\xf3ng",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.handleCancel()}},this.columnDefs=[{field:"index",headerName:"STT",width:110},{field:"name",headerName:"T\xean",editable:!0,sortable:!0,filter:!0,minWidth:180,flex:1},{field:"status",headerName:"Tr\u1ea1ng th\xe1i",editable:!0,cellRenderer:"statusNameCellRender",minWidth:150},{field:"order",headerName:"Th\u1ee9 t\u1ef1 s\u1eafp x\u1ebfp",editable:!0,sortable:!0}],this.defaultColDef={minWidth:100,resizable:!0},this.frameworkComponents={statusCellRender:n.p,statusNameCellRender:n.q},this.excelStyles=[...d.b]}ngOnInit(){}onExportExcel(){this.gridApi.exportDataAsExcel({columnWidth:100,sheetName:this.moduleName,exportMode:void 0,suppressTextAsCDATA:!0,rowHeight:void 0,fileName:`Bi\u1ec3u m\u1eabu nh\u1eadp li\u1ec7u ${this.moduleName}.xlsx`,headerRowHeight:void 0,customHeader:[],customFooter:[]})}onReset(){this.gridApi.setRowData([])}parseExcel(e){const t=new FileReader;t.onload=e=>{const t=mt.read(e.target.result,{type:"binary"});t.SheetNames.forEach(e=>{const i=mt.utils.sheet_to_json(t.Sheets[e]);this.jsonObject=[...i]});const i=[];let n=0,o=!1;this.jsonObject.forEach(e=>{const t={index:++n};o=!1,this.excelColumnsMapping.forEach(i=>{this.convertExcelToGrid(t,e)}),i.push(t)}),this.gridApi.setRowData(i),0===i.length?this.messageService.error("D\u1eef li\u1ec7u t\u1ea3i l\xean kh\xf4ng ph\xf9 h\u1ee3p"):this.messageService.success("T\u1ea3i l\xean d\u1eef li\u1ec7u th\xe0nh c\xf4ng")},t.onerror=e=>{this.messageService.error("T\u1ea3i l\xean d\u1eef li\u1ec7u th\u1ea5t b\u1ea1i - "+e)},t.readAsBinaryString(e)}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.gridApi.hideOverlay()}approvePerfectScrollbar(){const e=this.elementRef.nativeElement.querySelector(".ag-body-viewport"),t=this.elementRef.nativeElement.querySelector(".ag-body-horizontal-scroll-viewport");e&&new c.a(e).update(),t&&new c.a(t).update()}handleCancel(){this.isVisible=!1,this.eventEmmit.emit(this.isCompleteImport?{type:"success"}:{type:"close"})}initData(e={}){this.option=e,this.isCompleteImport=!1,this.isVisible=!0}closeModalReloadData(){this.isVisible=!1,this.eventEmmit.emit({type:"success"})}save(){this.isLoading=!0;const e=[];return this.gridApi.forEachNode((t,i)=>{e.push(t.data)}),0===e.length?(this.isLoading=!1,this.messageService.error(`Danh s\xe1ch ${this.moduleName} kh\xf4ng c\xf3 d\u1eef li\u1ec7u!`),new ht.a):this.unitService.createMany(e).subscribe(e=>{this.isLoading=!1,200===e.code&&null!=e.data?(this.messageService.success(""+e.message),this.isCompleteImport=!0):this.messageService.error(""+e.message)},e=>{this.isLoading=!1,this.messageService.error(e.error?""+e.error.message:""+e.status)})}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(u.e),h.Ob(f.t),h.Ob(h.l))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-unit-import-item"]],inputs:{isVisible:"isVisible"},outputs:{eventEmmit:"eventEmmit"},decls:7,vars:4,consts:[["nzMaskClosable","false","nzWidth","900px",3,"nzVisible","nzTitle","nzContent","nzFooter","nzVisibleChange","nzOnCancel"],["modalTitle",""],["modalContent",""],["modalFooter",""],["nzMd","24"],["id","deleteGrid",1,"ag-theme-alpine",2,"width","100%","height","350px",3,"columnDefs","defaultColDef","suppressRowClickSelection","rowData","frameworkComponents","overlayLoadingTemplate","overlayNoRowsTemplate","excelStyles","gridReady"],["deleteGrid",""],["nz-button","","nzType","primary","class","btn-dark",3,"click",4,"ngIf"],["style","display: inline-block; margin-right: 8px; margin-left: 8px",3,"nzTransformFile",4,"ngIf"],["nz-button","","nzType","default",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-primary",3,"nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-warning",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-success",3,"click",4,"ngIf"],["nz-button","","nzType","primary",1,"btn-dark",3,"click"],["nz-icon","","nzType","download","nzTheme","outline"],[2,"display","inline-block","margin-right","8px","margin-left","8px",3,"nzTransformFile"],["nz-button","","nzType","primary",1,"btn-excel"],["nz-icon","","nzType","upload"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],["nz-button","","nzType","primary",1,"btn-primary",3,"nzLoading","click"],["nz-icon","","nzType","save","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-warning",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-success",3,"click"]],template:function(e,t){if(1&e&&(h.Ub(0,"nz-modal",0),h.bc("nzVisibleChange",(function(e){return t.isVisible=e}))("nzOnCancel",(function(){return t.handleCancel()})),h.Lc(1,ft,1,1,"ng-template",null,1,h.Mc),h.Lc(3,gt,10,8,"ng-template",null,2,h.Mc),h.Lc(5,Tt,6,6,"ng-template",null,3,h.Mc),h.Tb()),2&e){const e=h.xc(2),i=h.xc(4),n=h.xc(6);h.nc("nzVisible",t.isVisible)("nzTitle",e)("nzContent",i)("nzFooter",n)}},directives:[p.a,v.c,v.a,o.a,l.o,T.a,C.a,w.a,I.a,ut.a],styles:[""]}),e})();function wt(e,t){if(1&e&&h.Nc(0),2&e){const e=h.fc();h.Pc(" ",e.tittle," ")}}function It(e,t){if(1&e){const e=h.Vb();h.Ub(0,"form",4),h.bc("ngSubmit",(function(){return h.Ac(e),h.fc().save()})),h.Ub(1,"nz-form-item"),h.Ub(2,"nz-form-label",5),h.Nc(3,"M\xe3"),h.Tb(),h.Ub(4,"nz-form-control",6),h.Pb(5,"input",7),h.Tb(),h.Tb(),h.Ub(6,"nz-form-item"),h.Ub(7,"nz-form-label",8),h.Nc(8,"T\xean"),h.Tb(),h.Ub(9,"nz-form-control",9),h.Pb(10,"input",10),h.Tb(),h.Tb(),h.Ub(11,"nz-form-item"),h.Ub(12,"nz-form-label",11),h.Nc(13,"Th\u1ee9 t\u1ef1"),h.Tb(),h.Ub(14,"nz-form-control",6),h.Pb(15,"input",12),h.Tb(),h.Tb(),h.Ub(16,"nz-form-item",13),h.Ub(17,"nz-form-label",14),h.Nc(18,"Tr\u1ea1ng th\xe1i"),h.Tb(),h.Ub(19,"nz-form-control",15),h.Pb(20,"nz-switch",16),h.Ub(21,"label"),h.Ub(22,"nz-tag",17),h.Nc(23,"\u0110ang \xe1p d\u1ee5ng"),h.Tb(),h.Ub(24,"nz-tag",17),h.Nc(25,"Ng\u1eebng \xe1p d\u1ee5ng"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(26,"nz-form-item",18),h.Ub(27,"nz-form-label",19),h.Nc(28," M\xf4 t\u1ea3 "),h.Tb(),h.Ub(29,"nz-form-control",6),h.Pb(30,"textarea",20),h.Tb(),h.Tb(),h.Tb()}if(2&e){const e=h.fc();h.nc("formGroup",e.form),h.Ab(2),h.nc("nzSm",6)("nzXs",24),h.Ab(2),h.nc("nzSm",17)("nzXs",24),h.Ab(3),h.nc("nzSm",6)("nzXs",24),h.Ab(2),h.nc("nzSm",17)("nzXs",24),h.Ab(3),h.nc("nzSm",6)("nzXs",24),h.Ab(2),h.nc("nzSm",17)("nzXs",24),h.Ab(3),h.nc("nzSm",6)("nzXs",24),h.Ab(2),h.nc("nzSpan",17),h.Ab(3),h.nc("nzColor","#00BB00")("hidden",!e.form.value.status),h.Ab(2),h.nc("nzColor","#EF5350")("hidden",e.form.value.status),h.Ab(3),h.nc("nzSm",6)("nzXs",24),h.Ab(2),h.nc("nzSm",17)("nzXs",24)}}function Dt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",24),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnEdit.click(t)})),h.Pb(1,"i",25),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnEdit.title," ")}}function Nt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",26),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnSave.click(t)})),h.Pb(1,"i",27),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.nc("nzLoading",e.isLoading),h.Ab(2),h.Pc("",e.btnSave.title," ")}}function kt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",26),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnSaveAndCreate.click(t)})),h.Pb(1,"i",27),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.nc("nzLoading",e.isLoading),h.Ab(2),h.Pc("",e.btnSaveAndCreate.title," ")}}function Ut(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",28),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnCancel.click(t)})),h.Pb(1,"i",29),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnCancel.title," ")}}function Et(e,t){if(1&e&&(h.Lc(0,Dt,3,1,"button",21),h.Lc(1,Nt,3,2,"button",22),h.Lc(2,kt,3,2,"button",22),h.Lc(3,Ut,3,1,"button",23)),2&e){const e=h.fc();h.nc("ngIf",e.isInfo&&e.btnEdit.visible&&e.btnEdit.grandAccess),h.Ab(1),h.nc("ngIf",!e.isInfo&&e.btnSave.visible&&e.btnSave.grandAccess),h.Ab(1),h.nc("ngIf",!e.isInfo&&!e.isEdit&&e.btnSaveAndCreate.visible&&e.btnSaveAndCreate.grandAccess),h.Ab(1),h.nc("ngIf",e.btnCancel.visible&&e.btnCancel.grandAccess)}}let Rt=(()=>{class e{constructor(e,t,i,n){this.fb=e,this.messageService=t,this.unitApiService=i,this.aclService=n,this.type="add",this.isVisible=!1,this.eventEmmit=new h.n,this.moduleName="\u0111\u01a1n v\u1ecb t\xednh",this.isInfo=!1,this.isEdit=!1,this.isAdd=!1,this.tittle="",this.isLoading=!1,this.isReloadGrid=!1,this.btnSave={title:"L\u01b0u",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.save()}},this.btnSaveAndCreate={title:"L\u01b0u & Th\xeam m\u1edbi",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.save(!0)}},this.btnCancel={title:"\u0110\xf3ng",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.handleCancel()}},this.btnEdit={title:"C\u1eadp nh\u1eadt",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.updateFormToEdit()}},this.form=this.fb.group({code:[{value:null,disabled:!0}],name:[null,[m.w.required]],order:[null],status:[!0],description:[null]})}handleCancel(){this.isVisible=!1,this.eventEmmit.emit(this.isReloadGrid?{type:"success"}:{type:"close"})}ngOnInit(){this.initRightOfUser()}initRightOfUser(){}updateFormToEdit(){var e,t,i,n;this.updateFormType("edit"),null===(e=this.form.get("name"))||void 0===e||e.enable(),null===(t=this.form.get("order"))||void 0===t||t.enable(),null===(i=this.form.get("status"))||void 0===i||i.enable(),null===(n=this.form.get("description"))||void 0===n||n.enable()}updateFormType(e){switch(e){case"add":this.isInfo=!1,this.isEdit=!1,this.isAdd=!0,this.tittle="Th\xeam m\u1edbi "+this.moduleName;break;case"info":this.isInfo=!0,this.isEdit=!1,this.isAdd=!1,this.tittle="Chi ti\u1ebft "+this.moduleName;break;case"edit":this.isInfo=!1,this.isEdit=!0,this.isAdd=!1,this.tittle="C\u1eadp nh\u1eadt "+this.moduleName;break;default:this.isInfo=!1,this.isEdit=!1,this.isAdd=!0,this.tittle="Th\xeam m\u1edbi "+this.moduleName}}initData(e,t=null,i={}){this.isLoading=!1,this.isReloadGrid=!1,this.item=e,this.type=t,this.option=i,this.updateFormType(t),this.form=this.fb.group(null==this.item.id?{code:[{value:null,disabled:!0}],name:[{value:null,disabled:this.isInfo},[m.w.required]],order:[{value:0,disabled:this.isInfo}],status:[{value:!0,disabled:this.isInfo}],description:[{value:null,disabled:this.isInfo}]}:{code:[{value:this.item.code,disabled:!0}],name:[{value:this.item.name,disabled:this.isInfo},[m.w.required]],order:[{value:this.item.order,disabled:this.isInfo}],status:[{value:this.item.status,disabled:this.isInfo}],description:[{value:this.item.description,disabled:this.isInfo}]})}resetForm(){var e,t;this.form.reset(),null===(e=this.form.get("status"))||void 0===e||e.setValue(!0),null===(t=this.form.get("order"))||void 0===t||t.setValue(0)}closeModalReloadData(){this.isVisible=!1,this.eventEmmit.emit({type:"success"})}save(e=!1){this.isLoading=!0,Object(d.B)(this.form);for(const i in this.form.controls)this.form.controls[i].markAsDirty(),this.form.controls[i].updateValueAndValidity();if(!this.form.valid)return this.isLoading=!1,void this.messageService.error("Ki\u1ec3m tra l\u1ea1i th\xf4ng tin c\xe1c tr\u01b0\u1eddng \u0111\xe3 nh\u1eadp!");const t={id:this.item.id,name:this.form.controls.name.value,order:this.form.controls.order.value,status:this.form.controls.status.value,description:this.form.controls.description.value};return null==t.name||""===t.name?(this.isLoading=!1,void this.messageService.error("T\xean \u0111\u01a1n v\u1ecb t\xednh kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!")):this.isAdd?this.unitApiService.create(t).subscribe(t=>{this.isLoading=!1,200===t.code&&null!=t.data?(this.messageService.success(""+t.message),this.isReloadGrid=!0,e?this.resetForm():this.closeModalReloadData()):this.messageService.error(""+t.message)},e=>{this.isLoading=!1,this.messageService.error(e.error?""+e.error.message:""+e.status)}):this.isEdit?this.unitApiService.update(t).subscribe(e=>{this.isLoading=!1,200===e.code&&null!=e.data?(this.messageService.success(""+e.message),this.closeModalReloadData()):this.messageService.error(""+e.message)},e=>{this.isLoading=!1,this.messageService.error(e.error?""+e.error.message:""+e.status)}):void 0}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(m.e),h.Ob(u.e),h.Ob(f.t),h.Ob(g.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-unit-item"]],inputs:{type:"type",item:"item",isVisible:"isVisible",option:"option"},outputs:{eventEmmit:"eventEmmit"},decls:7,vars:4,consts:[["nzMaskClosable","false",3,"nzVisible","nzTitle","nzContent","nzFooter","nzVisibleChange","nzOnCancel"],["modalTitle",""],["modalContent",""],["modalFooter",""],["nz-form","",3,"formGroup","ngSubmit"],["nzFor","code",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nz-input","","formControlName","code","id","code","placeholder","M\xe3 s\u1ebd t\u1ef1 \u0111\u1ed9ng sinh"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nzErrorTip","T\xean \u0111\u01a1n v\u1ecb t\xednh kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!",3,"nzSm","nzXs"],["nz-input","","formControlName","name","id","name","placeholder","Nh\u1eadp v\xe0o t\xean"],["nzFor","order",3,"nzSm","nzXs"],["nz-input","","type","number","id","order","formControlName","order","placeholder","Nh\u1eadp v\xe0o s\u1ed1 th\u1ee9 t\u1ef1"],["nz-row",""],["nzFor","status",3,"nzSm","nzXs"],[3,"nzSpan"],["formControlName","status","nzSize","small",2,"margin-right","5px"],[3,"nzColor","hidden"],[2,"margin-bottom","0"],["nzFor","description",3,"nzSm","nzXs"],["rows","3","nz-input","","id","description","formControlName","description","placeholder","Nh\u1eadp v\xe0o m\xf4 t\u1ea3"],["nz-button","","nzType","primary","class","btn-secondary",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-primary",3,"nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-warning",3,"click",4,"ngIf"],["nz-button","","nzType","primary",1,"btn-secondary",3,"click"],["nz-icon","","nzType","edit","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-primary",3,"nzLoading","click"],["nz-icon","","nzType","save","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-warning",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","fill"]],template:function(e,t){if(1&e&&(h.Ub(0,"nz-modal",0),h.bc("nzVisibleChange",(function(e){return t.isVisible=e}))("nzOnCancel",(function(){return t.handleCancel()})),h.Lc(1,wt,1,1,"ng-template",null,1,h.Mc),h.Lc(3,It,31,24,"ng-template",null,2,h.Mc),h.Lc(5,Et,4,4,"ng-template",null,3,h.Mc),h.Tb()),2&e){const e=h.xc(2),i=h.xc(4),n=h.xc(6);h.nc("nzVisible",t.isVisible)("nzTitle",e)("nzContent",i)("nzFooter",n)}},directives:[p.a,m.x,m.p,z.b,m.h,v.c,z.c,v.a,z.d,z.a,y.b,m.d,m.o,m.g,m.s,A.a,S.a,l.o,T.a,C.a,w.a,I.a],styles:[""]}),e})();var Lt=i("Nqz0"),Ot=i("Q8cG");function xt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",31),h.bc("click",(function(t){return h.Ac(e),h.fc().btnReload.click(t)})),h.Pb(1,"i",32),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnReload.title," ")}}function Pt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",33),h.bc("click",(function(t){return h.Ac(e),h.fc().btnAdd.click(t)})),h.Pb(1,"i",34),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnAdd.title," ")}}function Mt(e,t){if(1&e&&(h.Ub(0,"button",35),h.Pb(1,"i",36),h.Nc(2," Excel"),h.Pb(3,"i",37),h.Tb()),2&e){h.fc();const e=h.xc(8);h.nc("nzDropdownMenu",e)}}function Vt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",38),h.bc("click",(function(t){return h.Ac(e),h.fc().btnExportExcel.click(t)})),h.Pb(1,"i",39),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnExportExcel.title," ")}}function Ft(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",38),h.bc("click",(function(t){return h.Ac(e),h.fc().btnImportExcel.click(t)})),h.Pb(1,"i",40),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnImportExcel.title," ")}}function Xt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",41),h.bc("click",(function(t){return h.Ac(e),h.fc().btnDelete.click(t)})),h.Pb(1,"i",42),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnDelete.title," ")}}function Gt(e,t){1&e&&h.Pb(0,"i",46)}function qt(e,t){1&e&&h.Pb(0,"i",47)}function Bt(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",43),h.bc("click",(function(){h.Ac(e);const t=h.fc();return t.filter.ShowAdSearch=!t.filter.ShowAdSearch,t.onResetSearch(!0)})),h.gc(1,"translate"),h.Lc(2,Gt,1,0,"i",44),h.Lc(3,qt,1,0,"i",45),h.Tb()}if(2&e){const e=h.fc();h.oc("title",h.hc(1,3,"layout.button.btn-show-ad-search.label")),h.Ab(2),h.nc("ngIf",!e.filter.ShowAdSearch),h.Ab(1),h.nc("ngIf",e.filter.ShowAdSearch)}}function Wt(e,t){if(1&e&&h.Pb(0,"nz-option",48),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}function Ht(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",49),h.bc("click",(function(t){return h.Ac(e),h.fc().btnSearch.click(t)})),h.Pb(1,"i",50),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnSearch.title," ")}}let $t=(()=>{class e{constructor(e,t,i,o){this.unitApiService=e,this.aclService=t,this.notification=i,this.elementRef=o,this.isRenderComplete=!1,this.listStatus=d.m,this.filter=Object.assign({},d.s),this.pageSizeOptions=[],this.paginationMessage="",this.columnDefs=[],this.grid={dataCount:0,rowData:[],totalData:0},this.modules=[b.a],this.rowSelection="multiple",this.overlayLoadingTemplate=d.p,this.overlayNoRowsTemplate=d.q,this.quickText="",this.isLoadingDelete=!1,this.isShowDelete=!1,this.isShowImport=!1,this.tittle="Danh s\xe1ch \u0111\u01a1n v\u1ecb t\xednh",this.moduleName="\u0110\u01a1n v\u1ecb t\xednh",this.modal={type:"",item:{},isShow:!1,option:{}},this.columnDefs=[{field:"index",headerName:"STT",width:110,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0},{field:"code",headerName:"M\xe3",minWidth:180,flex:1},{field:"name",headerName:"T\xean",sortable:!0,filter:!0,minWidth:180,flex:1},{field:"statusName",headerName:"Tr\u1ea1ng th\xe1i",minWidth:150,cellRenderer:"statusNameCellRender"},{field:"order",headerName:"Th\u1ee9 t\u1ef1 s\u1eafp x\u1ebfp",sortable:!0},{headerName:"Thao t\xe1c",minWidth:150,cellRenderer:"btnCellRender",cellRendererParams:{infoClicked:e=>this.onViewItem(e),editClicked:e=>this.onEditItem(e),deleteClicked:e=>this.onDeleteItem(e)}}],this.defaultColDef={minWidth:100,resizable:!0},this.frameworkComponents={btnCellRender:n.a,statusNameCellRender:n.q},this.excelStyles=[...d.b],this.btnAdd={title:"Th\xeam m\u1edbi",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onAddItem()}},this.btnExportExcel={title:"Export excel",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onExportExcel()}},this.btnImportExcel={title:"Import excel",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onImportExcel()}},this.btnDelete={title:"X\xf3a",titlei18n:"",visible:!1,enable:!0,grandAccess:!0,click:e=>{this.onDeleteItem()}},this.btnSearch={title:"T\xecm ki\u1ebfm",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.initGridData()}},this.btnResetSearch={title:"\u0110\u1eb7t l\u1ea1i",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onResetSearch(!1)}},this.btnReload={title:"T\u1ea3i l\u1ea1i",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onResetSearch(!0)}}}ngOnInit(){this.initRightOfUser(),this.isRenderComplete=!0}initRightOfUser(){}onPageSizeChange(){this.initGridData()}onPageNumberChange(){this.initGridData()}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.initGridData()}approvePerfectScrollbar(){const e=this.elementRef.nativeElement.querySelector(".ag-body-viewport"),t=this.elementRef.nativeElement.querySelector(".ag-body-horizontal-scroll-viewport");e&&new c.a(e).update(),t&&new c.a(t).update()}onSelectionChanged(e){const t=this.gridApi.getSelectedRows();this.btnDelete.visible=t.length>0}onCellDoubleClicked(e){this.onViewItem(e.data)}onExportExcel(){const e={columnWidth:100,sheetName:this.moduleName,exportMode:void 0,suppressTextAsCDATA:!0,rowHeight:void 0,fileName:`Danh s\xe1ch ${this.moduleName} ${dt(new Date).format("DD-MM-YYYY")}.xlsx`,headerRowHeight:void 0,customHeader:[[],[{styleId:"bigHeader",data:{type:"String",value:`Danh s\xe1ch ${this.moduleName} (${dt(new Date).format("DD-MM-YYYY")})`},mergeAcross:3}],[]],customFooter:[[]]};this.gridApi.exportDataAsExcel(e)}onImportExcel(){this.isShowImport=!0,this.importModal.initData()}onResetSearch(e){this.filter.pageNumber=1,this.filter.textSearch=void 0,this.filter.status=null,e&&this.initGridData()}onAddItem(){this.modal={type:"add",item:{},isShow:!0,option:{}},this.itemModal.initData({},"add")}onEditItem(e=null){null===e&&(e=this.gridApi.getSelectedRows()[0]),this.modal={type:"edit",item:e,isShow:!0,option:{}},this.itemModal.initData(e,"edit")}onViewItem(e=null){null===e&&(e=this.gridApi.getSelectedRows()[0]),this.modal={type:"info",item:e,isShow:!0,option:{}},this.itemModal.initData(e,"info")}onDeleteItem(e=null){console.log(e)}onModalEventEmmit(e){this.modal.isShow=!1,"success"===e.type&&this.initGridData()}onDeleteEventEmmit(e){"success"===e.type?this.initGridData():"confirm"===e.type&&(this.deleteModal.updateIsLoading(!0),this.deleteListItem(e.listId))}onImportEventEmmit(e){"success"===e.type&&this.initGridData()}deleteListItem(e){return this.isLoadingDelete=!0,this.unitApiService.delete(e).subscribe(e=>{this.isLoadingDelete=!1,200===e.code&&null!=e.data?this.deleteModal.updateData(e.data):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message)},e=>{this.isLoadingDelete=!1,this.deleteModal.updateData(void 0),this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",e.error?""+e.error.message:""+e.status)})}initGridData(){return this.btnDelete.visible=!1,this.gridApi.showLoadingOverlay(),this.unitApiService.getFilter(this.filter).subscribe(e=>{var t;if(this.gridApi.hideOverlay(),200!==e.code)return void this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message);if(null==e.data)return void this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message);const i=e.data;let n=(void 0===this.filter.pageSize?0:this.filter.pageSize)*((void 0===this.filter.pageNumber?0:this.filter.pageNumber)-1);this.paginationMessage=`Hi\u1ec3n th\u1ecb <b>${n+1} - ${n+i.dataCount}</b> tr\xean t\u1ed5ng s\u1ed1 <b>${i.totalCount}</b> k\u1ebft qu\u1ea3`;for(const o of i.data)o.index=++n,o.statusName=null===(t=this.listStatus.find(e=>e.id===o.status))||void 0===t?void 0:t.name,o.infoGrantAccess=!0,o.editGrantAccess=!0,o.deleteGrantAccess=!0;this.grid.totalData=i.totalCount,this.grid.dataCount=i.dataCount,this.grid.rowData=i.data,this.pageSizeOptions=[...d.r],this.pageSizeOptions=this.pageSizeOptions.filter(e=>e<i.totalCount),this.pageSizeOptions.push(i.totalCount)},e=>{this.gridApi.hideOverlay()})}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(f.t),h.Ob(g.a),h.Ob(H.b),h.Ob(h.l))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-unit"]],viewQuery:function(e,t){var i;1&e&&(h.Sc(Rt,!0),h.Sc(n.f,!0),h.Sc(Ct,!0)),2&e&&(h.wc(i=h.cc())&&(t.itemModal=i.first),h.wc(i=h.cc())&&(t.deleteModal=i.first),h.wc(i=h.cc())&&(t.importModal=i.first))},decls:41,vars:37,consts:[["onBack","{() => window.history.back()}",3,"title"],[3,"nzBordered"],["nzSm","16","nzXS","24","nzMd","16",1,"padding-bottom-10"],["nz-button","","nzType","default","class","btn-reload",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-primary",3,"click",4,"ngIf"],["nz-button","","nz-dropdown","","class","btn-excel",3,"nzDropdownMenu",4,"ngIf"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item",""],["nz-button","","nzType","primary","class","btn-excel",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-danger",3,"click",4,"ngIf"],["nzSm","8","nzXS","24","nzMd","8",1,"pull-right","padding-bottom-10"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","","placeholder","Nh\u1eadp t\u1eeb kh\xf3a t\xecm ki\u1ebfm",3,"ngModel","ngModelChange","keyup.enter"],["suffixIconButton",""],[3,"hidden"],["nzSm","8","nzXS","12","nzMd","8",1,"padding-bottom-10"],[1,"margin-0"],["nzFor","status",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Ch\u1ecdn tr\u1ea1ng th\xe1i",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-button","","nzType","primary","class","btn-success",3,"click",4,"ngIf"],["id","unit-grid",1,"ag-theme-alpine",2,"width","100%","height","70vh",3,"modules","columnDefs","defaultColDef","suppressRowClickSelection","rowSelection","rowData","overlayLoadingTemplate","overlayNoRowsTemplate","frameworkComponents","excelStyles","selectionChanged","gridReady"],["agGrid",""],[3,"grid","filter","pageSizeOptions","pageNumberChange","pageSizeChange"],[3,"isVisible","item","type","option","eventEmmit"],["itemModal",""],[3,"isVisible","eventEmmit"],["deleteModal",""],["importModal",""],["nz-button","","nzType","default",1,"btn-reload",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],["nz-button","","nzType","primary",1,"btn-primary",3,"click"],["nz-icon","","nzType","file-add","nzTheme","fill"],["nz-button","","nz-dropdown","",1,"btn-excel",3,"nzDropdownMenu"],["nz-icon","","nzType","file-excel","nzTheme","outline"],["nz-icon","","nzType","down"],["nz-button","","nzType","primary",1,"btn-excel",3,"click"],["nz-icon","","nzType","download","nzTheme","outline"],["nz-icon","","nzType","upload","nzTheme","outline"],["nz-button","","nzType","primary",1,"btn-danger",3,"click"],["nz-icon","","nzType","delete","nzTheme","fill"],["nz-button","","nzType","default","nzSearch","",3,"title","click"],["nz-icon","","nzType","caret-down","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","caret-up","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","caret-up","nzTheme","outline"],[3,"nzLabel","nzValue"],["nz-button","","nzType","primary",1,"btn-success",3,"click"],["nz-icon","","nzType","search","nzTheme","outline"]],template:function(e,t){if(1&e&&(h.Ub(0,"page-header-wrapper",0),h.Ub(1,"nz-card",1),h.Ub(2,"nz-row"),h.Ub(3,"nz-col",2),h.Lc(4,xt,3,1,"button",3),h.Lc(5,Pt,3,1,"button",4),h.Lc(6,Mt,4,1,"button",5),h.Ub(7,"nz-dropdown-menu",null,6),h.Ub(9,"ul",7),h.Ub(10,"li",8),h.Lc(11,Vt,3,1,"button",9),h.Tb(),h.Ub(12,"li",8),h.Lc(13,Ft,3,1,"button",9),h.Tb(),h.Tb(),h.Tb(),h.Lc(14,Xt,3,1,"button",10),h.Tb(),h.Ub(15,"nz-col",11),h.Ub(16,"nz-input-group",12),h.Ub(17,"input",13),h.bc("ngModelChange",(function(e){return t.filter.textSearch=e}))("keyup.enter",(function(){return t.initGridData()})),h.Tb(),h.Tb(),h.Lc(18,Bt,4,5,"ng-template",null,14,h.Mc),h.Tb(),h.Tb(),h.Ub(20,"nz-row",15),h.Ub(21,"nz-col",16),h.Ub(22,"nz-form-item",17),h.Ub(23,"nz-form-label",18),h.Nc(24,"Tr\u1ea1ng th\xe1i"),h.Tb(),h.Ub(25,"nz-form-control",19),h.Ub(26,"nz-select",20),h.bc("ngModelChange",(function(e){return t.filter.status=e})),h.Lc(27,Wt,1,2,"nz-option",21),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(28,"nz-col",16),h.Lc(29,Ht,3,1,"button",22),h.Tb(),h.Tb(),h.Ub(30,"nz-row"),h.Ub(31,"ag-grid-angular",23,24),h.bc("selectionChanged",(function(e){return t.onSelectionChanged(e)}))("gridReady",(function(e){return t.onGridReady(e)})),h.Tb(),h.Pb(33,"hr"),h.Tb(),h.Ub(34,"app-ag-grid-pagination",25),h.bc("pageNumberChange",(function(){return t.onPageNumberChange()}))("pageSizeChange",(function(){return t.onPageSizeChange()})),h.Tb(),h.Tb(),h.Tb(),h.Ub(35,"app-unit-item",26,27),h.bc("eventEmmit",(function(e){return t.onModalEventEmmit(e)})),h.Tb(),h.Ub(37,"delete-modal",28,29),h.bc("eventEmmit",(function(e){return t.onDeleteEventEmmit(e)})),h.Tb(),h.Ub(39,"app-unit-import-item",28,30),h.bc("eventEmmit",(function(e){return t.onImportEventEmmit(e)})),h.Tb()),2&e){const e=h.xc(19);h.nc("title",t.tittle),h.Ab(1),h.nc("nzBordered",!1),h.Ab(3),h.nc("ngIf",t.btnReload.visible&&t.btnReload.grandAccess),h.Ab(1),h.nc("ngIf",t.btnAdd.visible&&t.btnAdd.grandAccess),h.Ab(1),h.nc("ngIf",t.btnExportExcel.visible&&t.btnExportExcel.grandAccess||t.btnImportExcel.visible&&t.btnImportExcel.grandAccess),h.Ab(5),h.nc("ngIf",t.btnExportExcel.visible&&t.btnExportExcel.grandAccess),h.Ab(2),h.nc("ngIf",t.btnImportExcel.visible&&t.btnImportExcel.grandAccess),h.Ab(1),h.nc("ngIf",t.btnDelete.visible&&t.btnDelete.grandAccess),h.Ab(2),h.nc("nzAddOnAfter",e),h.Ab(1),h.nc("ngModel",t.filter.textSearch),h.Ab(3),h.nc("hidden",!t.filter.ShowAdSearch),h.Ab(3),h.nc("nzSm",8)("nzXs",24),h.Ab(2),h.nc("nzSm",15)("nzXs",24),h.Ab(1),h.nc("ngModel",t.filter.status),h.Ab(1),h.nc("ngForOf",t.listStatus),h.Ab(2),h.nc("ngIf",t.btnSearch.visible&&t.btnSearch.grandAccess),h.Ab(2),h.nc("modules",t.modules)("columnDefs",t.columnDefs)("defaultColDef",t.defaultColDef)("suppressRowClickSelection",!0)("rowSelection",t.rowSelection)("rowData",t.grid.rowData)("overlayLoadingTemplate",t.overlayLoadingTemplate)("overlayNoRowsTemplate",t.overlayNoRowsTemplate)("frameworkComponents",t.frameworkComponents)("excelStyles",t.excelStyles),h.Ab(3),h.nc("grid",t.grid)("filter",t.filter)("pageSizeOptions",t.pageSizeOptions),h.Ab(1),h.nc("isVisible",t.modal.isShow)("item",t.modal.item)("type",t.modal.type)("option",t.modal.option),h.Ab(2),h.nc("isVisible",t.isShowDelete),h.Ab(2),h.nc("isVisible",t.isShowImport)}},directives:[$.a,j.a,v.c,v.a,l.o,Lt.f,Ot.c,w.a,Ot.e,y.c,y.b,m.d,m.o,m.r,z.c,z.d,z.a,J.e,l.n,o.a,Q.a,Rt,K.a,Ct,T.a,C.a,I.a,Lt.e,Lt.c,J.a],pipes:[D.c],styles:[""]}),e})();function jt(e,t){if(1&e&&h.Nc(0),2&e){const e=h.fc();h.Pc(" ",e.tittle," ")}}function Yt(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.ward.modal-item.code.message.maxlength")))}function Jt(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.ward.modal-item.code.message.minlength")))}function Qt(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.ward.modal-item.code.message.required")))}function Kt(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.ward.modal-item.code.message.pattern")))}function Zt(e,t){if(1&e&&(h.Lc(0,Yt,3,3,"ng-container",27),h.Lc(1,Jt,3,3,"ng-container",27),h.Lc(2,Qt,3,3,"ng-container",27),h.Lc(3,Kt,3,3,"ng-container",27)),2&e){const e=t.$implicit;h.nc("ngIf",e.hasError("maxlength")),h.Ab(1),h.nc("ngIf",e.hasError("minlength")),h.Ab(1),h.nc("ngIf",e.hasError("required")),h.Ab(1),h.nc("ngIf",e.hasError("pattern"))}}function _t(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.ward.modal-item.name.message.maxlength")))}function ei(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.ward.modal-item.name.message.minlength")))}function ti(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.ward.modal-item.name.message.required")))}function ii(e,t){1&e&&(h.Sb(0),h.Nc(1),h.gc(2,"translate"),h.Rb()),2&e&&(h.Ab(1),h.Oc(h.hc(2,1,"function.ward.modal-item.name.message.pattern")))}function ni(e,t){if(1&e&&(h.Lc(0,_t,3,3,"ng-container",27),h.Lc(1,ei,3,3,"ng-container",27),h.Lc(2,ti,3,3,"ng-container",27),h.Lc(3,ii,3,3,"ng-container",27)),2&e){const e=t.$implicit;h.nc("ngIf",e.hasError("maxlength")),h.Ab(1),h.nc("ngIf",e.hasError("minlength")),h.Ab(1),h.nc("ngIf",e.hasError("required")),h.Ab(1),h.nc("ngIf",e.hasError("pattern"))}}function oi(e,t){if(1&e&&h.Pb(0,"nz-option",28),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}function ai(e,t){if(1&e&&h.Pb(0,"nz-option",28),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}function si(e,t){if(1&e){const e=h.Vb();h.Ub(0,"form",4),h.bc("ngSubmit",(function(){return h.Ac(e),h.fc().save()})),h.Ub(1,"nz-form-item"),h.Ub(2,"nz-form-label",5),h.Nc(3),h.gc(4,"translate"),h.Tb(),h.Ub(5,"nz-form-control",6),h.Pb(6,"input",7),h.gc(7,"translate"),h.Lc(8,Zt,4,4,"ng-template",null,8,h.Mc),h.Tb(),h.Tb(),h.Ub(10,"nz-form-item"),h.Ub(11,"nz-form-label",9),h.Nc(12),h.gc(13,"translate"),h.Tb(),h.Ub(14,"nz-form-control",6),h.Pb(15,"input",10),h.gc(16,"translate"),h.Lc(17,ni,4,4,"ng-template",null,11,h.Mc),h.Tb(),h.Tb(),h.Ub(19,"nz-form-item"),h.Ub(20,"nz-form-label",12),h.Nc(21),h.gc(22,"translate"),h.Tb(),h.Ub(23,"nz-form-control",13),h.gc(24,"translate"),h.Ub(25,"nz-select",14),h.bc("ngModelChange",(function(t){return h.Ac(e),h.fc().changeProvince(t)})),h.gc(26,"translate"),h.Lc(27,oi,1,2,"nz-option",15),h.Tb(),h.Tb(),h.Tb(),h.Ub(28,"nz-form-item"),h.Ub(29,"nz-form-label",16),h.Nc(30),h.gc(31,"translate"),h.Tb(),h.Ub(32,"nz-form-control",13),h.gc(33,"translate"),h.Ub(34,"nz-select",17),h.gc(35,"translate"),h.Lc(36,ai,1,2,"nz-option",15),h.Tb(),h.Tb(),h.Tb(),h.Ub(37,"nz-form-item",18),h.Ub(38,"nz-form-label",19),h.Nc(39),h.gc(40,"translate"),h.Tb(),h.Ub(41,"nz-form-control",20),h.Pb(42,"nz-switch",21),h.Ub(43,"label"),h.Ub(44,"nz-tag",22),h.Nc(45),h.gc(46,"translate"),h.Tb(),h.Ub(47,"nz-tag",22),h.Nc(48),h.gc(49,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(50,"nz-form-item",23),h.Ub(51,"nz-form-label",24),h.Nc(52),h.gc(53,"translate"),h.Tb(),h.Ub(54,"nz-form-control",25),h.Ub(55,"textarea",26),h.gc(56,"translate"),h.Nc(57,"        "),h.Tb(),h.Tb(),h.Tb(),h.Tb()}if(2&e){const e=h.xc(9),t=h.xc(18),i=h.fc();h.nc("formGroup",i.form),h.Ab(2),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(4,47,"function.ward.modal-item.code.label")),h.Ab(2),h.nc("nzSm",16)("nzXs",24)("nzErrorTip",e),h.Ab(1),h.oc("placeholder",h.hc(7,49,"function.ward.modal-item.code.placeholder")),h.Ab(5),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(13,51,"function.ward.modal-item.name.label")),h.Ab(2),h.nc("nzSm",16)("nzXs",24)("nzErrorTip",t),h.Ab(1),h.oc("placeholder",h.hc(16,53,"function.ward.modal-item.name.placeholder")),h.Ab(5),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(22,55,"function.ward.modal-item.province.label")),h.Ab(2),h.oc("nzErrorTip",h.hc(24,57,"function.ward.modal-item.province-id.error-message.required")),h.nc("nzSm",16)("nzXs",24),h.Ab(2),h.oc("nzPlaceHolder",h.hc(26,59,"function.ward.modal-item.search.province.placeholder")),h.Ab(2),h.nc("ngForOf",i.listProvinceName),h.Ab(2),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(31,61,"function.ward.modal-item.district.label")),h.Ab(2),h.oc("nzErrorTip",h.hc(33,63,"function.ward.modal-item.district-id.error-message.required")),h.nc("nzSm",16)("nzXs",24),h.Ab(2),h.oc("nzPlaceHolder",h.hc(35,65,"function.ward.modal-item.search.district.placeholder")),h.Ab(2),h.nc("ngForOf",i.listDistrictName),h.Ab(2),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Oc(h.hc(40,67,"function.ward.modal-item.status.label")),h.Ab(2),h.nc("nzSpan",16),h.Ab(3),h.nc("nzColor","#00BB00")("hidden",!i.form.value.status),h.Ab(1),h.Oc(h.hc(46,69,"function.ward.modal-item.status-true.label")),h.Ab(2),h.nc("nzColor","#EF5350")("hidden",i.form.value.status),h.Ab(1),h.Oc(h.hc(49,71,"function.ward.modal-item.status-false.label")),h.Ab(3),h.nc("nzSm",7)("nzXs",24),h.Ab(1),h.Pc(" ",h.hc(53,73,"function.ward.modal-item.description.label")," "),h.Ab(2),h.nc("nzSm",16)("nzXs",24),h.Ab(1),h.oc("placeholder",h.hc(56,75,"function.ward.modal-item.description.placeholder"))}}function ci(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",32),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnEdit.click(t)})),h.Pb(1,"i",33),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnEdit.titlei18n," ")}}function li(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",34),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnSave.click(t)})),h.Pb(1,"i",35),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.nc("nzLoading",e.isLoading)("disabled",e.form.invalid),h.Ab(2),h.Pc("",e.btnSave.titlei18n," ")}}function ri(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",36),h.bc("click",(function(t){return h.Ac(e),h.fc(2).btnCancel.click(t)})),h.Pb(1,"i",37),h.Nc(2),h.Tb()}if(2&e){const e=h.fc(2);h.Ab(2),h.Pc("",e.btnCancel.titlei18n," ")}}function di(e,t){if(1&e&&(h.Lc(0,ci,3,1,"button",29),h.Lc(1,li,3,3,"button",30),h.Lc(2,ri,3,1,"button",31)),2&e){const e=h.fc();h.nc("ngIf",e.isInfo&&e.btnEdit.visible&&e.btnEdit.grandAccess),h.Ab(1),h.nc("ngIf",!e.isInfo&&e.btnSave.visible&&e.btnSave.grandAccess),h.Ab(1),h.nc("ngIf",e.btnCancel.visible&&e.btnCancel.grandAccess)}}let bi=(()=>{class e{constructor(e,t,i,n,o,a,s,c){var l;this.fb=e,this.messageService=t,this.wardApiService=i,this.aclService=n,this.districtApiService=o,this.tokenService=a,this.i18n=s,this.doc=c,this.type="add",this.isVisible=!1,this.eventEmmit=new h.n,this.moduleName="ph\u01b0\u1eddng x\xe3",this.isInfo=!1,this.isEdit=!1,this.isAdd=!1,this.tittle="",this.listDistrictName=[],this.listProvinceName=[],this.headerUploadFile={},this.isLoading=!1,this.isReloadGrid=!1,this.filter=Object.assign({},d.s),this.regexCode=d.t,this.regexName=d.v;const r=null===(l=a.get())||void 0===l?void 0:l.token;r&&(this.headerUploadFile={Authorization:"Bearer "+r}),this.btnSave={title:"L\u01b0u",titlei18n:""+this.i18n.fanyi("layout.button.btn-save.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.save()}},this.btnSaveAndCreate={title:"L\u01b0u & Th\xeam m\u1edbi",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.save(!0)}},this.btnCancel={title:"\u0110\xf3ng",titlei18n:""+this.i18n.fanyi("layout.button.btn-cancel.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.handleCancel()}},this.btnEdit={title:"C\u1eadp nh\u1eadt",titlei18n:""+this.i18n.fanyi("layout.button.btn-edit.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.updateFormToEdit()}},this.form=this.fb.group({code:[{value:null},[m.w.required,m.w.pattern(d.t)]],name:[null,[m.w.required,m.w.pattern(d.v)]],districtId:[null,[m.w.required]],provinceId:[null,[m.w.required]],order:[null],status:[{value:!0}],description:[null]})}handleCancel(){this.isVisible=!1,this.eventEmmit.emit(this.isReloadGrid?{type:"success"}:{type:"close"})}ngOnInit(){this.initRightOfUser()}initRightOfUser(){this.btnSave.grandAccess=this.aclService.canAbility("WARD-ADD")||this.aclService.canAbility("WARD-EDIT"),this.btnEdit.grandAccess=this.aclService.canAbility("WARD-EDIT"),this.btnSaveAndCreate.grandAccess=this.aclService.canAbility("WARD-ADD")||this.aclService.canAbility("WARD-EDIT")}updateFormToEdit(){var e,t,i,n,o,a,s,c;this.updateFormType("edit"),null===(e=this.form.get("name"))||void 0===e||e.enable(),null===(t=this.form.get("order"))||void 0===t||t.enable(),null===(i=this.form.get("status"))||void 0===i||i.enable(),null===(n=this.form.get("districtId"))||void 0===n||n.enable(),null===(o=this.form.get("provinceId"))||void 0===o||o.enable(),null===(a=this.form.get("provinceName"))||void 0===a||a.enable(),null===(s=this.form.get("description"))||void 0===s||s.enable(),null===(c=this.form.get("districtName"))||void 0===c||c.enable()}updateFormType(e){switch(e){case"add":this.isInfo=!1,this.isEdit=!1,this.isAdd=!0,this.tittle=""+this.i18n.fanyi("function.ward.modal-item.header-add");break;case"info":this.isInfo=!0,this.isEdit=!1,this.isAdd=!1,this.tittle=""+this.i18n.fanyi("function.ward.modal-item.header-info");break;case"edit":this.isInfo=!1,this.isEdit=!0,this.isAdd=!1,this.tittle=""+this.i18n.fanyi("function.ward.modal-item.header-edit");break;default:this.isInfo=!1,this.isEdit=!1,this.isAdd=!0,this.tittle=""+this.i18n.fanyi("function.ward.modal-item.header-add")}}changeProvince(e){this.filter.provinceId=e,this.getlistDistrictByProviceId(e)}getlistDistrictByProviceId(e){this.districtApiService.getListCombobox(e).subscribe(e=>{this.listDistrictName=e.data})}initData(e,t=null,i={}){var n,o,a,s,c,l,r,b,h,u,f,g,p,z,v,y,A,S;this.isLoading=!1,this.isReloadGrid=!1,this.item=e,this.type=t,this.option=i,this.listDistrictName=i.listDistrictName,this.listProvinceName=i.listProvinceName,this.updateFormType(t),this.isAdd&&(null===(n=this.form.get("code"))||void 0===n||n.enable(),null===(o=this.form.get("name"))||void 0===o||o.enable(),null===(a=this.form.get("status"))||void 0===a||a.enable(),null===(s=this.form.get("description"))||void 0===s||s.enable(),null===(c=this.form.get("districtId"))||void 0===c||c.enable(),null===(l=this.form.get("provinceId"))||void 0===l||l.enable(),this.resetForm()),this.isEdit&&(null===(r=this.form.get("code"))||void 0===r||r.disable(),null===(b=this.form.get("name"))||void 0===b||b.enable(),null===(h=this.form.get("status"))||void 0===h||h.enable(),null===(u=this.form.get("description"))||void 0===u||u.enable(),null===(f=this.form.get("districtId"))||void 0===f||f.enable(),null===(g=this.form.get("districtId"))||void 0===g||g.setValue(null==e?void 0:e.districtId),null===(p=this.form.get("provinceId"))||void 0===p||p.enable(),null===(z=this.form.get("provinceId"))||void 0===z||z.setValue(null==e?void 0:e.provinceId),null===(v=this.form.get("status"))||void 0===v||v.setValue(null==e?void 0:e.status)),this.isInfo&&(this.form=this.fb.group({code:[{value:null,disabled:this.isInfo},[m.w.required,m.w.pattern(d.t)]],name:[{value:null,disabled:this.isInfo},[m.w.required,m.w.pattern(d.v)]],provinceId:[{value:null==e?void 0:e.provinceId,disabled:this.isInfo},[m.w.required]],districtId:[{value:null==e?void 0:e.districtId,disabled:this.isInfo},[m.w.required]],status:[{value:null==e?void 0:e.status,disabled:this.isInfo}],description:[{value:null,disabled:this.isInfo}]})),null===(y=this.form.get("code"))||void 0===y||y.setValue(null==e?void 0:e.code),null===(A=this.form.get("name"))||void 0===A||A.setValue(null==e?void 0:e.name),null===(S=this.form.get("description"))||void 0===S||S.setValue(null==e?void 0:e.description)}resetForm(){var e,t,i,n,o,a,s;this.form.reset(),null===(e=this.form.get("status"))||void 0===e||e.setValue(!0),null===(t=this.form.get("order"))||void 0===t||t.setValue(0),null===(i=this.form.get("code"))||void 0===i||i.setValue(""),null===(n=this.form.get("name"))||void 0===n||n.setValue(""),null===(o=this.form.get("provinceId"))||void 0===o||o.setValue(""),null===(a=this.form.get("districtId"))||void 0===a||a.setValue(""),null===(s=this.form.get("description"))||void 0===s||s.setValue("")}closeModalReloadData(){this.resetForm(),this.isVisible=!1,this.eventEmmit.emit({type:"success"})}save(e=!1){this.isLoading=!0,Object(d.B)(this.form);for(const i in this.form.controls)this.form.controls[i].markAsDirty(),this.form.controls[i].updateValueAndValidity();if(!this.form.valid)return this.isLoading=!1,void this.messageService.error(""+this.i18n.fanyi("function.ward.modal-item.error.message.form-invalid"));const t={id:this.item.id,name:this.form.controls.name.value,code:this.form.controls.code.value.toUpperCase(),districtId:this.form.controls.districtId.value,provinceId:this.form.controls.provinceId.value,status:this.form.controls.status.value,description:this.form.controls.description.value};return this.isAdd?this.wardApiService.create(t).subscribe(t=>{this.isLoading=!1,200===t.code&&null!=t.data?(this.messageService.success(""+t.message),this.isReloadGrid=!0,e?this.resetForm():this.closeModalReloadData()):this.messageService.error(""+t.message)},e=>{this.isLoading=!1,this.messageService.error(e.error?""+e.error.message:""+e.status)}):this.isEdit?this.wardApiService.update(t).subscribe(e=>{this.isLoading=!1,200===e.code&&null!=e.data?(this.messageService.success(""+e.message),this.closeModalReloadData()):this.messageService.error(""+e.message)},e=>{this.isLoading=!1,this.messageService.error(e.error?""+e.error.message:""+e.status)}):void 0}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(m.e),h.Ob(u.e),h.Ob(f.z),h.Ob(g.a),h.Ob(f.f),h.Ob(ce.a),h.Ob(r.a),h.Ob(l.e))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-ward-item"]],inputs:{type:"type",item:"item",isVisible:"isVisible",option:"option"},outputs:{eventEmmit:"eventEmmit"},decls:7,vars:4,consts:[["nzMaskClosable","false",3,"nzVisible","nzTitle","nzContent","nzFooter","nzVisibleChange","nzOnCancel"],["modalTitle",""],["modalContent",""],["modalFooter",""],["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","code",3,"nzSm","nzXs"],["nzHasFeedback","",3,"nzSm","nzXs","nzErrorTip"],["nz-input","","minlength","1","maxlength","70","required","","formControlName","code","id","code",2,"text-transform","uppercase",3,"placeholder"],["validateCode",""],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nz-input","","minlength","1","maxlength","256","required","","formControlName","name","id","name",3,"placeholder"],["validateName",""],["nzRequired","","nzFor","provinceName",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["formControlName","provinceId","nzShowSearch","","nzAllowClear","",3,"nzPlaceHolder","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzRequired","","nzFor","districtName",3,"nzSm","nzXs"],["formControlName","districtId","nzShowSearch","","nzAllowClear","",3,"nzPlaceHolder"],["nz-row",""],["nzFor","status",3,"nzSm","nzXs"],[3,"nzSpan"],["formControlName","status","nzSize","small",2,"margin-right","5px"],[3,"nzColor","hidden"],[2,"margin-bottom","0"],["nzFor","description",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["rows","3","nz-input","","id","description","formControlName","description",3,"placeholder"],[4,"ngIf"],[3,"nzLabel","nzValue"],["nz-button","","nzType","primary","class","btn-secondary",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-primary",3,"nzLoading","disabled","click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-warning",3,"click",4,"ngIf"],["nz-button","","nzType","primary",1,"btn-secondary",3,"click"],["nz-icon","","nzType","edit","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-primary",3,"nzLoading","disabled","click"],["nz-icon","","nzType","save","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-warning",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","fill"]],template:function(e,t){if(1&e&&(h.Ub(0,"nz-modal",0),h.bc("nzVisibleChange",(function(e){return t.isVisible=e}))("nzOnCancel",(function(){return t.handleCancel()})),h.Lc(1,jt,1,1,"ng-template",null,1,h.Mc),h.Lc(3,si,58,77,"ng-template",null,2,h.Mc),h.Lc(5,di,3,3,"ng-template",null,3,h.Mc),h.Tb()),2&e){const e=h.xc(2),i=h.xc(4),n=h.xc(6);h.nc("nzVisible",t.isVisible)("nzTitle",e)("nzContent",i)("nzFooter",n)}},directives:[p.a,m.x,m.p,z.b,m.h,v.c,z.c,v.a,z.d,z.a,y.b,m.d,m.k,m.j,m.v,m.o,m.g,J.e,l.n,A.a,S.a,l.o,J.a,T.a,C.a,w.a,I.a],pipes:[D.c],styles:[""]}),e})();function hi(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",34),h.bc("click",(function(t){return h.Ac(e),h.fc().btnReload.click(t)})),h.Pb(1,"i",35),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnReload.titlei18n," ")}}function mi(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",36),h.bc("click",(function(t){return h.Ac(e),h.fc().btnAdd.click(t)})),h.Pb(1,"i",37),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnAdd.titlei18n," ")}}function ui(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",38),h.bc("click",(function(t){return h.Ac(e),h.fc().btnDelete.click(t)})),h.Pb(1,"i",39),h.Nc(2),h.Tb()}if(2&e){const e=h.fc();h.Ab(2),h.Pc("",e.btnDelete.titlei18n," ")}}function fi(e,t){1&e&&h.Pb(0,"i",43)}function gi(e,t){1&e&&h.Pb(0,"i",44)}function pi(e,t){if(1&e){const e=h.Vb();h.Ub(0,"button",40),h.bc("click",(function(){h.Ac(e);const t=h.fc();return t.filter.ShowAdSearch=!t.filter.ShowAdSearch,t.onResetSearch(!0)})),h.gc(1,"translate"),h.Lc(2,fi,1,0,"i",41),h.Lc(3,gi,1,0,"i",42),h.Tb()}if(2&e){const e=h.fc();h.oc("title",h.hc(1,3,"layout.button.btn-show-ad-search.label")),h.Ab(2),h.nc("ngIf",!e.filter.ShowAdSearch),h.Ab(1),h.nc("ngIf",e.filter.ShowAdSearch)}}function zi(e,t){if(1&e&&h.Pb(0,"nz-option",45),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}function vi(e,t){if(1&e&&h.Pb(0,"nz-option",45),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}function yi(e,t){if(1&e&&h.Pb(0,"nz-option",45),2&e){const e=t.$implicit;h.nc("nzLabel",e.name)("nzValue",e.id)}}const Ai=function(){return["/"]},Si=[{path:"",children:[{path:"",redirectTo:"unit",pathMatch:"full"},{path:"unit",component:$t},{path:"country",component:se},{path:"province",component:rt},{path:"district",component:xe},{path:"ward",component:(()=>{class e{constructor(e,t,i,o,a,s,c,l){this.wardApiService=e,this.aclService=t,this.notification=i,this.elementRef=o,this.districtApiService=a,this.provinceApiService=s,this.i18n=c,this.doc=l,this.isRenderComplete=!1,this.listStatus=d.m,this.filter=Object.assign({},d.s),this.pageSizeOptions=[],this.paginationMessage="",this.columnDefs=[],this.grid={dataCount:0,rowData:[],totalData:0},this.modules=[b.a],this.rowSelection="multiple",this.overlayLoadingTemplate=d.p,this.overlayNoRowsTemplate=d.q,this.quickText="",this.isLoadingDelete=!1,this.isShowDelete=!1,this.isShowImport=!1,this.tittle=""+this.i18n.fanyi("function.ward.title"),this.modal={type:"",item:{},isShow:!1,option:{}},this.listDistrictName=[],this.listProvinceName=[],this.columnDefs=[{field:"index",headerName:""+this.i18n.fanyi("layout.grid.index"),width:150,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0},{field:"code",headerName:""+this.i18n.fanyi("function.ward.grid.code"),minWidth:180,flex:1},{field:"name",headerName:""+this.i18n.fanyi("function.ward.grid.name"),sortable:!0,filter:!0,minWidth:180,flex:1},{field:"districtName",headerName:""+this.i18n.fanyi("function.ward.grid.districtname"),sortable:!0,filter:!0,minWidth:180,flex:1},{field:"provinceName",headerName:""+this.i18n.fanyi("function.ward.grid.provincename"),sortable:!0,filter:!0,minWith:180,flex:1},{field:"status",headerName:""+this.i18n.fanyi("function.ward.grid.status"),minWidth:150,cellRenderer:"statusNameCellRender"},{headerName:""+this.i18n.fanyi("layout.grid.action"),minWidth:150,cellRenderer:"btnCellRender",cellRendererParams:{infoClicked:e=>this.onViewItem(e),editClicked:e=>this.onEditItem(e),deleteClicked:e=>this.onDeleteItem(e)}}],this.defaultColDef={minWidth:100,resizable:!0},this.frameworkComponents={btnCellRender:n.a,dateCellRender:n.e,statusNameCellRender:n.q},this.excelStyles=[...d.b],this.btnAdd={title:"Th\xeam m\u1edbi",titlei18n:""+this.i18n.fanyi("layout.button.btn-add.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onAddItem()}},this.btnDelete={title:"X\xf3a",titlei18n:""+this.i18n.fanyi("layout.button.btn-delete.label"),visible:!1,enable:!0,grandAccess:!0,click:e=>{this.onDeleteItem()}},this.btnSearch={title:"T\xecm ki\u1ebfm",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.initGridData()}},this.btnResetSearch={title:"\u0110\u1eb7t l\u1ea1i",titlei18n:"",visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onResetSearch(!1)}},this.btnReload={title:"T\u1ea3i l\u1ea1i",titlei18n:""+this.i18n.fanyi("layout.button.btn-reload.label"),visible:!0,enable:!0,grandAccess:!0,click:e=>{this.onResetSearch(!0)}}}ngOnInit(){this.initRightOfUser(),this.isRenderComplete=!0,this.loadComboBoxDataProvince(),this.loadComboBoxDataDistrict()}initRightOfUser(){this.btnAdd.grandAccess=this.aclService.canAbility("WARD-ADD"),this.btnDelete.grandAccess=this.aclService.canAbility("WARD-DELETE")}onPageSizeChange(){this.initGridData()}onPageNumberChange(){this.initGridData()}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.initGridData()}approvePerfectScrollbar(){const e=this.elementRef.nativeElement.querySelector(".ag-body-viewport"),t=this.elementRef.nativeElement.querySelector(".ag-body-horizontal-scroll-viewport");e&&new c.a(e).update(),t&&new c.a(t).update()}onSelectionChanged(e){const t=this.gridApi.getSelectedRows();this.btnDelete.visible=t.length>0}onCellDoubleClicked(e){this.onViewItem(e.data)}onResetSearch(e){this.filter.pageNumber=1,this.filter.textSearch=void 0,this.filter.status=null,this.filter.countryId=null,e&&this.initGridData()}onAddItem(){this.modal={type:"add",item:{},isShow:!0,option:{}},this.itemModal.initData({},"add",{listDistrictName:this.listDistrictName,listProvinceName:this.listProvinceName})}onEditItem(e=null){return Object(s.b)(this,void 0,void 0,(function*(){const t=yield this.getById(e.id);200===t.code&&null!=t.data?(this.modal={type:"edit",item:e,isShow:!0,option:{}},this.itemModal.initData(t.data,"edit",{listDistrictName:this.listDistrictName,listProvinceName:this.listProvinceName})):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+t.message)}))}onViewItem(e=null){return Object(s.b)(this,void 0,void 0,(function*(){const t=yield this.getById(e.id);200===t.code&&null!=t.data?(this.modal={type:"info",item:e,isShow:!0,option:{}},this.itemModal.initData(t.data,"info",{listDistrictName:this.listDistrictName,listProvinceName:this.listProvinceName})):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+t.message)}))}onDeleteItem(e=null){let t=this.gridApi.getSelectedRows();null!==e&&(t=[],t.push(e));let i="";i=t.length>1?""+this.i18n.fanyi("layout-modal.delete.message.many"):""+this.i18n.fanyi("layout-modal.delete.message.one"),this.isShowDelete=!0,this.deleteModal.initData(t,i)}changeStatus(e){this.filter.status=e,this.initGridData()}changeProvince(e){this.filter.provinceId=e,this.getlistDistrictByProviceId(e),this.initGridData()}changeDistrict(e){this.filter.districtId=e,this.initGridData()}onModalEventEmmit(e){this.modal.isShow=!1,"success"===e.type&&this.initGridData()}onDeleteEventEmmit(e){"success"===e.type?this.initGridData():"confirm"===e.type&&(this.deleteModal.updateIsLoading(!0),this.deleteListItem(e.listId))}onImportEventEmmit(e){"success"===e.type&&this.initGridData()}deleteListItem(e){return this.isLoadingDelete=!0,this.wardApiService.delete(e).subscribe(e=>{this.isLoadingDelete=!1,200===e.code&&null!=e.data?this.deleteModal.updateData(e.data):this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message)},e=>{this.isLoadingDelete=!1,this.deleteModal.updateData(void 0),this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",e.error?""+e.error.message:""+e.status)})}loadComboBoxDataProvince(){this.provinceApiService.getListCombobox().subscribe(e=>{this.listProvinceName=e.data})}loadComboBoxDataDistrict(){this.districtApiService.getListCombobox().subscribe(e=>{this.listDistrictName=e.data})}getlistDistrictByProviceId(e){this.districtApiService.getListCombobox(e).subscribe(e=>{this.listDistrictName=e.data})}getById(e){return Object(s.b)(this,void 0,void 0,(function*(){return this.wardApiService.getById(e).toPromise()}))}initGridData(){return this.btnDelete.visible=!1,this.gridApi.showLoadingOverlay(),this.wardApiService.getFilter(this.filter).subscribe(e=>{var t;if(this.gridApi.hideOverlay(),200!==e.code)return void this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message);if(null==e.data)return void this.notification.error("C\xf3 l\u1ed7i x\u1ea3y ra",""+e.message);const i=e.data;let n=(void 0===this.filter.pageSize?0:this.filter.pageSize)*((void 0===this.filter.pageNumber?0:this.filter.pageNumber)-1);this.paginationMessage=`Hi\u1ec3n th\u1ecb <b>${n+1} - ${n+i.dataCount}</b> tr\xean t\u1ed5ng s\u1ed1 <b>${i.totalCount}</b> k\u1ebft qu\u1ea3`;for(const o of i.data)o.index=++n,o.statusName=null===(t=this.listStatus.find(e=>e.id===o.status))||void 0===t?void 0:t.name,o.infoGrantAccess=!0,o.editGrantAccess=this.aclService.canAbility("WARD-EDIT"),o.deleteGrantAccess=this.aclService.canAbility("WARD-DELETE");this.grid.totalData=i.totalCount,this.grid.dataCount=i.dataCount,this.grid.rowData=i.data,this.pageSizeOptions=[...d.r],this.pageSizeOptions=this.pageSizeOptions.filter(e=>e<i.totalCount),this.pageSizeOptions.push(i.totalCount)},e=>{this.gridApi.hideOverlay()})}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(f.z),h.Ob(g.a),h.Ob(H.b),h.Ob(h.l),h.Ob(f.f),h.Ob(f.q),h.Ob(r.a),h.Ob(l.e))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-ward"]],viewQuery:function(e,t){var i;1&e&&(h.Sc(bi,!0),h.Sc(n.f,!0)),2&e&&(h.wc(i=h.cc())&&(t.itemModal=i.first),h.wc(i=h.cc())&&(t.deleteModal=i.first))},decls:68,vars:73,consts:[["onBack","{() => window.history.back()}",3,"title"],[1,"card-header"],["nz-row","",1,"header"],["nz-col","","nzSpan","12"],[3,"routerLink"],["nz-icon","","nzType","home"],["nz-col","","nzSpan","12",2,"text-align","right"],[3,"nzBordered"],["nzSm","10","nzXS","24","nzMd","10",1,"padding-bottom-10"],["nz-button","","nzType","default","class","btn-reload",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-primary",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","btn-danger",3,"click",4,"ngIf"],["nzSm","14","nzXS","24","nzMd","14",1,"pull-right","padding-bottom-10"],["nzJustify","end"],["nzSm","12","nzXS","12","nzMd","12",1,"padding-bottom-10"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["suffixIconButton",""],["nz-row","","nzJustify","start",3,"hidden"],["nzSm","6","nzXS","12","nzMd","8",1,"padding-bottom-10"],[1,"margin-0"],["nzFor","status",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nzShowSearch","","nzAllowClear","",2,"text-align","center",3,"nzPlaceHolder","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzShowSearch","","name","provinceId","nzAllowClear","",3,"ngModel","nzPlaceHolder","ngModelChange"],["nzShowSearch","","name","districtId","nzAllowClear","",3,"ngModel","nzPlaceHolder","ngModelChange"],["id","unit-grid",1,"ag-theme-alpine",2,"width","100%","height","70vh",3,"modules","columnDefs","defaultColDef","suppressRowClickSelection","rowSelection","rowData","overlayLoadingTemplate","overlayNoRowsTemplate","frameworkComponents","excelStyles","selectionChanged","cellDoubleClicked","gridReady"],["agGrid",""],[3,"grid","filter","pageSizeOptions","pageNumberChange","pageSizeChange"],[3,"isVisible","item","type","option","eventEmmit"],["itemModal",""],[3,"isVisible","eventEmmit"],["deleteModal",""],["nz-button","","nzType","default",1,"btn-reload",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],["nz-button","","nzType","primary",1,"btn-primary",3,"click"],["nz-icon","","nzType","file-add","nzTheme","fill"],["nz-button","","nzType","primary",1,"btn-danger",3,"click"],["nz-icon","","nzType","delete","nzTheme","fill"],["nz-button","","nzType","default","nzSearch","",3,"title","click"],["nz-icon","","nzType","caret-down","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","caret-up","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","caret-down","nzTheme","outline"],["nz-icon","","nzType","caret-up","nzTheme","outline"],[3,"nzLabel","nzValue"]],template:function(e,t){if(1&e&&(h.Ub(0,"page-header-wrapper",0),h.Ub(1,"nz-card",1),h.Ub(2,"div",2),h.Ub(3,"div",3),h.Ub(4,"nz-breadcrumb"),h.Ub(5,"nz-breadcrumb-item"),h.Ub(6,"a",4),h.Pb(7,"i",5),h.Tb(),h.Tb(),h.Ub(8,"nz-breadcrumb-item"),h.Ub(9,"a"),h.Ub(10,"span"),h.Nc(11),h.gc(12,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Ub(13,"nz-breadcrumb-item"),h.Ub(14,"a"),h.Nc(15),h.gc(16,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Pb(17,"div",6),h.Tb(),h.Tb(),h.Ub(18,"nz-card",7),h.Ub(19,"nz-row"),h.Ub(20,"nz-col",8),h.Lc(21,hi,3,1,"button",9),h.Lc(22,mi,3,1,"button",10),h.Lc(23,ui,3,1,"button",11),h.Tb(),h.Ub(24,"nz-col",12),h.Ub(25,"nz-row",13),h.Ub(26,"nz-col",14),h.Ub(27,"nz-input-group",15),h.Ub(28,"input",16),h.bc("ngModelChange",(function(e){return t.filter.textSearch=e}))("keyup.enter",(function(){return t.initGridData()})),h.gc(29,"translate"),h.Tb(),h.Tb(),h.Lc(30,pi,4,5,"ng-template",null,17,h.Mc),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(32,"div",18),h.Ub(33,"nz-col",19),h.Ub(34,"nz-form-item",20),h.Ub(35,"nz-form-label",21),h.Nc(36),h.gc(37,"translate"),h.Tb(),h.Ub(38,"nz-form-control",22),h.Ub(39,"nz-select",23),h.bc("ngModelChange",(function(e){return t.changeStatus(e)}))("ngModelChange",(function(e){return t.filter.status=e})),h.gc(40,"translate"),h.Lc(41,zi,1,2,"nz-option",24),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(42,"nz-col",19),h.Ub(43,"nz-form-item",20),h.Ub(44,"nz-form-label",22),h.Nc(45),h.gc(46,"translate"),h.Tb(),h.Ub(47,"nz-form-control",22),h.Ub(48,"nz-select",25),h.bc("ngModelChange",(function(e){return t.filter.provinceId=e}))("ngModelChange",(function(e){return t.changeProvince(e)})),h.gc(49,"translate"),h.Lc(50,vi,1,2,"nz-option",24),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(51,"nz-col",19),h.Ub(52,"nz-form-item",20),h.Ub(53,"nz-form-label",22),h.Nc(54),h.gc(55,"translate"),h.Tb(),h.Ub(56,"nz-form-control",22),h.Ub(57,"nz-select",26),h.bc("ngModelChange",(function(e){return t.filter.districtId=e}))("ngModelChange",(function(e){return t.changeDistrict(e)})),h.gc(58,"translate"),h.Lc(59,yi,1,2,"nz-option",24),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(60,"nz-row"),h.Ub(61,"ag-grid-angular",27,28),h.bc("selectionChanged",(function(e){return t.onSelectionChanged(e)}))("cellDoubleClicked",(function(e){return t.onCellDoubleClicked(e)}))("gridReady",(function(e){return t.onGridReady(e)})),h.Tb(),h.Tb(),h.Ub(63,"app-ag-grid-pagination",29),h.bc("pageNumberChange",(function(){return t.onPageNumberChange()}))("pageSizeChange",(function(){return t.onPageSizeChange()})),h.Tb(),h.Tb(),h.Tb(),h.Ub(64,"app-ward-item",30,31),h.bc("eventEmmit",(function(e){return t.onModalEventEmmit(e)})),h.Tb(),h.Ub(66,"delete-modal",32,33),h.bc("eventEmmit",(function(e){return t.onDeleteEventEmmit(e)})),h.Tb()),2&e){const e=h.xc(31);h.nc("title",t.tittle),h.Ab(6),h.nc("routerLink",h.rc(72,Ai)),h.Ab(5),h.Oc(h.hc(12,54,"menu.resource")),h.Ab(4),h.Pc(" ",h.hc(16,56,"layout.breadcum.ward")," "),h.Ab(3),h.nc("nzBordered",!1),h.Ab(3),h.nc("ngIf",t.btnReload.visible&&t.btnReload.grandAccess),h.Ab(1),h.nc("ngIf",t.btnAdd.visible&&t.btnAdd.grandAccess),h.Ab(1),h.nc("ngIf",t.btnDelete.visible&&t.btnDelete.grandAccess),h.Ab(4),h.nc("nzAddOnAfter",e),h.Ab(1),h.oc("placeholder",h.hc(29,58,"layout.grid.search.text-search.placeholder")),h.nc("ngModel",t.filter.textSearch),h.Ab(4),h.nc("hidden",t.filter.ShowAdSearch),h.Ab(3),h.nc("nzSm",8)("nzXs",24),h.Ab(1),h.Oc(h.hc(37,60,"layout.grid.search.status.label")),h.Ab(2),h.nc("nzSm",15)("nzXs",24),h.Ab(1),h.oc("nzPlaceHolder",h.hc(40,62,"layout.grid.search.status.placeholder")),h.nc("ngModel",t.filter.status),h.Ab(2),h.nc("ngForOf",t.listStatus),h.Ab(3),h.nc("nzSm",8)("nzXs",24),h.Ab(1),h.Oc(h.hc(46,64,"function.ward.grid.province.label")),h.Ab(2),h.nc("nzSm",15)("nzXs",24),h.Ab(1),h.oc("nzPlaceHolder",h.hc(49,66,"function.ward.grid.province.placeholder")),h.nc("ngModel",t.filter.provinceId),h.Ab(2),h.nc("ngForOf",t.listProvinceName),h.Ab(3),h.nc("nzSm",8)("nzXs",24),h.Ab(1),h.Oc(h.hc(55,68,"function.ward.grid.district.label")),h.Ab(2),h.nc("nzSm",16)("nzXs",24),h.Ab(1),h.oc("nzPlaceHolder",h.hc(58,70,"function.ward.grid.district.placeholder")),h.nc("ngModel",t.filter.districtId),h.Ab(2),h.nc("ngForOf",t.listDistrictName),h.Ab(2),h.nc("modules",t.modules)("columnDefs",t.columnDefs)("defaultColDef",t.defaultColDef)("suppressRowClickSelection",!0)("rowSelection",t.rowSelection)("rowData",t.grid.rowData)("overlayLoadingTemplate",t.overlayLoadingTemplate)("overlayNoRowsTemplate",t.overlayNoRowsTemplate)("frameworkComponents",t.frameworkComponents)("excelStyles",t.excelStyles),h.Ab(2),h.nc("grid",t.grid)("filter",t.filter)("pageSizeOptions",t.pageSizeOptions),h.Ab(1),h.nc("isVisible",t.modal.isShow)("item",t.modal.item)("type",t.modal.type)("option",t.modal.option),h.Ab(2),h.nc("isVisible",t.isShowDelete)}},directives:[$.a,j.a,v.c,v.a,Y.a,Y.b,a.m,w.a,I.a,l.o,y.c,y.b,m.d,m.o,m.r,z.c,z.d,z.a,J.e,l.n,o.a,Q.a,bi,K.a,T.a,C.a,J.a],pipes:[D.c],styles:[""]}),e})()}]}];let Ti=(()=>{class e{}return e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({factory:function(t){return new(t||e)},imports:[[a.n.forChild(Si)],a.n]}),e})(),Ci=(()=>{class e{}return e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({factory:function(t){return new(t||e)},imports:[[n.k,Ti,o.b.withComponents([])]]}),e})()}}]);